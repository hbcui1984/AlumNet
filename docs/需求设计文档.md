# AlumNet æ ¡å‹ä¼šå°ç¨‹åº - éœ€æ±‚ä¸è®¾è®¡æ–‡æ¡£

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯
è¿‘å¹´æ¥ï¼Œå„å¤§é«˜æ ¡ã€é«˜ä¸­ã€åˆä¸­çº·çº·ç»„ç»‡æ ¡å‹ä¼šï¼Œæ—¨åœ¨ï¼š
- å¯»æ‰¾å’Œè”ç»œä¼˜ç§€æ ¡å‹
- å»ºç«‹æ ¡å‹ä¸æ ¡å‹ä¹‹é—´çš„è¿æ¥
- åŠ å¼ºæ ¡å‹ä¸æ¯æ ¡ä¹‹é—´çš„è”ç³»
- å®ç°èµ„æºå…±äº«ï¼Œå…±åŒå‘å±•

### 1.2 é¡¹ç›®ç›®æ ‡
å¼€å‘ä¸€ä¸ª**å¼€æºç‰ˆæ ¡å‹ä¼šå°ç¨‹åº**ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š
- **é€šç”¨æ€§**ï¼šé€‚ç”¨äºå„ç±»å­¦æ ¡ï¼ˆé«˜æ ¡ã€é«˜ä¸­ã€åˆä¸­ç­‰ï¼‰
- **æ˜“éƒ¨ç½²**ï¼šåŸºäº uniCloud äº‘å¼€å‘ï¼Œé™ä½éƒ¨ç½²é—¨æ§›
- **å¯å®šåˆ¶**ï¼šæ”¯æŒå­¦æ ¡è‡ªå®šä¹‰å“ç‰Œã€åŠŸèƒ½æ¨¡å—
- **å¼€æºå…è´¹**ï¼šMIT åè®®å¼€æºï¼Œç¤¾åŒºå…±å»º

### 1.3 æŠ€æœ¯é€‰å‹
| å±‚çº§ | æŠ€æœ¯æ–¹æ¡ˆ |
|------|----------|
| åŸºç¡€æ¡†æ¶ | **uni-starter** (äº‘ç«¯ä¸€ä½“åº”ç”¨å¿«é€Ÿå¼€å‘æ¨¡æ¿) |
| å‰ç«¯ | uni-app (Vue3 + **TypeScript**) |
| åç«¯ | uniCloud (äº‘å¯¹è±¡ + äº‘æ•°æ®åº“) |
| ç”¨æˆ·ç³»ç»Ÿ | **uni-id** (å·²é›†æˆï¼Œå¼€ç®±å³ç”¨) |
| IMé€šè®¯ | **uni-im** (å®˜æ–¹å³æ—¶é€šè®¯æ–¹æ¡ˆ) |
| ç®¡ç†åå° | **uni-admin** (å®˜æ–¹åå°æ¡†æ¶) |
| UIæ¡†æ¶ | **uni-ui** (å®˜æ–¹ç»„ä»¶åº“ï¼Œ65+ç»„ä»¶) |
| éƒ¨ç½²å¹³å° | å¾®ä¿¡å°ç¨‹åºã€H5ã€App |

> **å¼€å‘è§„èŒƒ**ï¼š
> - **å‰ç«¯**ï¼šç»Ÿä¸€ä½¿ç”¨ **TypeScript** ç¼–å†™ï¼Œæå‡ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§
> - **åç«¯ï¼ˆäº‘å¯¹è±¡ï¼‰**ï¼šä½¿ç”¨ **JavaScript** ç¼–å†™ï¼Œé€šè¿‡ JSDoc æ³¨é‡Šæä¾›ç±»å‹æç¤º
> - ä¼˜å…ˆä½¿ç”¨ uni-app å†…ç½®ç»„ä»¶å’Œ uni-uiï¼Œä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹ UI åº“
> - éµå¾ª Vue3 Composition API é£æ ¼

### 1.4 uni-starter å·²æœ‰åŠŸèƒ½

åŸºäº uni-starter v2.2.13ï¼Œä»¥ä¸‹åŠŸèƒ½**å·²å®ç°**ï¼Œå¯ç›´æ¥å¤ç”¨ï¼š

| æ¨¡å— | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|:----:|
| ç”¨æˆ·è®¤è¯ | å¾®ä¿¡ç™»å½•ã€æ‰‹æœºå·ç™»å½•ã€å¯†ç ç™»å½• | âœ… |
| ç”¨æˆ·ä¿¡æ¯ | å¤´åƒã€æ˜µç§°ã€æ€§åˆ«ã€ç”Ÿæ—¥ç­‰ | âœ… |
| è´¦å·ç®¡ç† | ä¿®æ”¹å¯†ç ã€ç»‘å®šæ‰‹æœºã€æ³¨é”€è´¦å· | âœ… |
| å®åè®¤è¯ | èº«ä»½è¯å®åéªŒè¯ | âœ… |
| æ–‡ç« ç³»ç»Ÿ | åˆ—è¡¨ã€è¯¦æƒ…ã€åˆ†ç±»ã€æœç´¢ã€è¯„è®º | âœ… |
| ç”¨æˆ·ç­¾åˆ° | è¿ç»­ç­¾åˆ°ã€ç§¯åˆ†å¥–åŠ± | âœ… |
| æ„è§åé¦ˆ | åé¦ˆè¡¨å•ã€é™„ä»¶ä¸Šä¼  | âœ… |
| çŸ­ä¿¡æœåŠ¡ | éªŒè¯ç ã€çŸ­ä¿¡æ¨¡æ¿ | âœ… |
| æ¨é€é€šçŸ¥ | APPæ¨é€ã€è®¾å¤‡ç®¡ç† | âœ… |
| åº”ç”¨å‡çº§ | ç‰ˆæœ¬æ£€æµ‹ã€å¼ºåˆ¶æ›´æ–° | âœ… |
| æ•°æ®ç»Ÿè®¡ | ç”¨æˆ·æ´»è·ƒã€é¡µé¢è®¿é—® | âœ… |
| å›½é™…åŒ– | ä¸­æ–‡/è‹±æ–‡åˆ‡æ¢ | âœ… |

**éœ€è¦æ‰©å±•å¼€å‘çš„åŠŸèƒ½**ï¼š
- æ ¡å‹è®¤è¯ï¼ˆå…¥å­¦ä¿¡æ¯ã€æ ¡å‹æ¨èï¼‰
- æ ¡å‹å½•ï¼ˆæœç´¢ã€åç‰‡ã€éšç§è®¾ç½®ï¼‰
- æ ¡å‹åœ°å›¾
- æ´»åŠ¨æ¨¡å—ï¼ˆå‘å¸ƒã€æŠ¥åã€ç­¾åˆ°ï¼‰
- IMé€šè®¯ï¼ˆé›†æˆ uni-imï¼‰
- ç®¡ç†åå°ï¼ˆé›†æˆ uni-adminï¼‰

---

## äºŒã€ç”¨æˆ·è§’è‰²

### 2.1 è§’è‰²å®šä¹‰

| è§’è‰² | è¯´æ˜ | æ ¸å¿ƒæƒé™ |
|------|------|----------|
| æ¸¸å®¢ | æœªæ³¨å†Œ/æœªç™»å½•ç”¨æˆ· | æµè§ˆå…¬å¼€ä¿¡æ¯ã€ç”³è¯·æ³¨å†Œ |
| æ ¡å‹ | å·²è®¤è¯çš„æ ¡å‹ | å®Œæ•´åŠŸèƒ½ä½¿ç”¨ |
| ç­çº§ç®¡ç†å‘˜ | ç­çº§è´Ÿè´£äºº | ç®¡ç†ç­çº§æˆå‘˜ã€å‘å¸ƒç­çº§åŠ¨æ€ |
| æ ¡å‹ä¼šç®¡ç†å‘˜ | æ ¡å‹ä¼šå·¥ä½œäººå‘˜ | å®¡æ ¸æ ¡å‹ã€ç®¡ç†æ´»åŠ¨ã€å‘å¸ƒå…¬å‘Š |
| è¶…çº§ç®¡ç†å‘˜ | ç³»ç»Ÿç®¡ç†å‘˜ | å…¨éƒ¨æƒé™ã€ç³»ç»Ÿé…ç½® |

### 2.2 è§’è‰²æƒé™çŸ©é˜µ

| åŠŸèƒ½ | æ¸¸å®¢ | æ ¡å‹ | ç­çº§ç®¡ç†å‘˜ | æ ¡å‹ä¼šç®¡ç†å‘˜ | è¶…çº§ç®¡ç†å‘˜ |
|------|:----:|:----:|:----------:|:------------:|:----------:|
| æµè§ˆå…¬å¼€åŠ¨æ€ | âœ“ | âœ“ | âœ“ | âœ“ | âœ“ |
| æ³¨å†Œ/ç™»å½• | âœ“ | - | - | - | - |
| å®Œå–„ä¸ªäººä¿¡æ¯ | - | âœ“ | âœ“ | âœ“ | âœ“ |
| å‘å¸ƒåŠ¨æ€ | - | âœ“ | âœ“ | âœ“ | âœ“ |
| æŸ¥çœ‹æ ¡å‹å½• | - | âœ“ | âœ“ | âœ“ | âœ“ |
| å‚ä¸æ´»åŠ¨ | - | âœ“ | âœ“ | âœ“ | âœ“ |
| ç®¡ç†ç­çº§ | - | - | âœ“ | âœ“ | âœ“ |
| å®¡æ ¸æ ¡å‹ | - | - | - | âœ“ | âœ“ |
| å‘å¸ƒæ´»åŠ¨ | - | - | - | âœ“ | âœ“ |
| ç³»ç»Ÿé…ç½® | - | - | - | - | âœ“ |

---

## ä¸‰ã€åŠŸèƒ½æ¨¡å—

### 3.1 æ¨¡å—æ€»è§ˆ

```
æ ¡å‹ä¼šå°ç¨‹åº
â”œâ”€â”€ ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ æ³¨å†Œ/ç™»å½•
â”‚   â”œâ”€â”€ æ ¡å‹è®¤è¯
â”‚   â”œâ”€â”€ ä¸ªäººä¸­å¿ƒ
â”‚   â””â”€â”€ éšç§è®¾ç½®
â”œâ”€â”€ æ ¡å‹å½•æ¨¡å—
â”‚   â”œâ”€â”€ æ ¡å‹æœç´¢
â”‚   â”œâ”€â”€ æ ¡å‹åç‰‡
â”‚   â”œâ”€â”€ ç­çº§/å±Šåˆ«æµè§ˆ
â”‚   â””â”€â”€ æ ¡å‹åœ°å›¾
â”œâ”€â”€ åŠ¨æ€æ¨¡å—
â”‚   â”œâ”€â”€ åŠ¨æ€å‘å¸ƒ
â”‚   â”œâ”€â”€ åŠ¨æ€æµè§ˆ
â”‚   â”œâ”€â”€ ç‚¹èµ/è¯„è®º
â”‚   â””â”€â”€ æ ¡å‹æ•…äº‹
â”œâ”€â”€ æ´»åŠ¨æ¨¡å—
â”‚   â”œâ”€â”€ æ´»åŠ¨åˆ—è¡¨
â”‚   â”œâ”€â”€ æ´»åŠ¨è¯¦æƒ…
â”‚   â”œâ”€â”€ æ´»åŠ¨æŠ¥å
â”‚   â””â”€â”€ ç­¾åˆ°æ‰“å¡
â”œâ”€â”€ é€šè®¯æ¨¡å—
â”‚   â”œâ”€â”€ ç«™å†…æ¶ˆæ¯
â”‚   â”œâ”€â”€ ç³»ç»Ÿé€šçŸ¥
â”‚   â””â”€â”€ å…¬å‘Šå‘å¸ƒ
â”œâ”€â”€ æèµ æ¨¡å—ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ æèµ é¡¹ç›®
â”‚   â”œâ”€â”€ åœ¨çº¿æèµ 
â”‚   â””â”€â”€ æèµ è®°å½•
â””â”€â”€ ç®¡ç†åå°
    â”œâ”€â”€ æ ¡å‹ç®¡ç†
    â”œâ”€â”€ æ´»åŠ¨ç®¡ç†
    â”œâ”€â”€ å†…å®¹å®¡æ ¸
    â””â”€â”€ æ•°æ®ç»Ÿè®¡
```

### 3.2 æ ¸å¿ƒåŠŸèƒ½è¯¦è¿°

#### 3.2.1 ç”¨æˆ·æ¨¡å—

**æ³¨å†Œ/ç™»å½•**
- å¾®ä¿¡ä¸€é”®ç™»å½•ï¼ˆå°ç¨‹åºåœºæ™¯ï¼‰
- æ‰‹æœºå· + éªŒè¯ç ç™»å½•
- è´¦å·å¯†ç ç™»å½•ï¼ˆå¯é€‰ï¼‰

**æ ¡å‹è®¤è¯**
- å¡«å†™å…¥å­¦å¹´ä»½ã€æ¯•ä¸šå¹´ä»½ã€é™¢ç³»ã€ç­çº§ç­‰ä¿¡æ¯
- ä¸Šä¼ å­¦å†è¯æ˜/å­¦ç”Ÿè¯ï¼ˆå¯é€‰ï¼‰
- ç®¡ç†å‘˜å®¡æ ¸æˆ–è‡ªåŠ¨å®¡æ ¸ï¼ˆæ ¡å‹æ¨èï¼‰
- è®¤è¯çŠ¶æ€ï¼šå¾…å®¡æ ¸ã€å·²è®¤è¯ã€å·²æ‹’ç»

**ä¸ªäººä¸­å¿ƒ**
- åŸºæœ¬ä¿¡æ¯ï¼šå¤´åƒã€å§“åã€æ€§åˆ«ã€ç”Ÿæ—¥
- æ ¡å‹ä¿¡æ¯ï¼šå…¥å­¦å¹´ä»½ã€æ¯•ä¸šå¹´ä»½ã€é™¢ç³»ã€ç­çº§ã€å­¦å·
- èŒä¸šä¿¡æ¯ï¼šå…¬å¸ã€èŒä½ã€è¡Œä¸šã€å·¥ä½œåŸå¸‚
- è”ç³»æ–¹å¼ï¼šæ‰‹æœºã€å¾®ä¿¡ã€é‚®ç®±
- ä¸ªäººç®€ä»‹ã€ç‰¹é•¿æ ‡ç­¾

**éšç§è®¾ç½®**
- å¯é€‰æ‹©å…¬å¼€/éšè—çš„ä¿¡æ¯é¡¹
- è°å¯ä»¥æŸ¥çœ‹æˆ‘çš„è”ç³»æ–¹å¼ï¼ˆæ‰€æœ‰äºº/ä»…åŒç­/ä»…å¥½å‹/ä¸å…¬å¼€ï¼‰

#### 3.2.2 æ ¡å‹å½•æ¨¡å—

**æ‰¾æ ¡å‹**
- å¤šç»´åº¦ç­›é€‰æ¡ä»¶ï¼š
  - æŒ‰å¹´çº§/å±Šåˆ«ç­›é€‰ï¼ˆå…¥å­¦å¹´ä»½ã€æ¯•ä¸šå¹´ä»½ï¼‰
  - æŒ‰è¡Œä¸šç­›é€‰ï¼ˆITã€é‡‘èã€æ•™è‚²ã€åŒ»ç–—ç­‰ï¼‰
  - æŒ‰å…´è¶£æ ‡ç­¾ç­›é€‰ï¼ˆç¯®çƒã€æ‘„å½±ã€è¯»ä¹¦ç­‰ï¼‰
  - æŒ‰åŸå¸‚/åœ°åŒºç­›é€‰
  - æŒ‰é™¢ç³»/ä¸“ä¸šç­›é€‰ï¼ˆå¤§å­¦ï¼‰
- æœç´¢ç»“æœåˆ—è¡¨å±•ç¤ºæ ¡å‹åŸºæœ¬ä¿¡æ¯ï¼ˆå¤´åƒã€å§“åã€å±Šåˆ«ã€è¡Œä¸šï¼‰
- æ”¯æŒç»„åˆç­›é€‰ï¼ˆå¦‚ï¼š2010å±Š + ITè¡Œä¸š + æ·±åœ³ï¼‰

**æ ¡å‹åç‰‡**
- å±•ç¤ºæ ¡å‹å…¬å¼€ä¿¡æ¯ï¼ˆæ ¹æ®éšç§è®¾ç½®ï¼‰
- åç‰‡äº¤æ¢åŠŸèƒ½ï¼š
  - å‘é€åç‰‡äº¤æ¢è¯·æ±‚
  - å¯¹æ–¹åŒæ„åäº’ç›¸æˆä¸ºå¥½å‹
  - äº¤æ¢åå¯æŸ¥çœ‹å¯¹æ–¹å®Œæ•´è”ç³»æ–¹å¼
- åç‰‡ä¿¡æ¯åŒ…å«ï¼šå¤´åƒã€å§“åã€å±Šåˆ«ã€é™¢ç³»ã€å…¬å¸ã€èŒä½ã€è¡Œä¸šã€å…´è¶£æ ‡ç­¾

**å¥½å‹ç³»ç»Ÿ**
- å¥½å‹å…³ç³»å»ºç«‹ï¼šåŒæ–¹äº’æ¢åç‰‡åæˆä¸ºå¥½å‹
- å¥½å‹åˆ—è¡¨ç®¡ç†
- å¥½å‹å¤‡æ³¨è®¾ç½®
- åˆ é™¤å¥½å‹åŠŸèƒ½
- å¥½å‹çŠ¶æ€ï¼šå¾…ç¡®è®¤ã€å·²æ·»åŠ ã€å·²æ‹’ç»

**å¥½å‹èŠå¤©**
- æˆä¸ºå¥½å‹åå¼€å¯ç§èŠåŠŸèƒ½ï¼ˆåŸºäº uni-imï¼‰
- æ”¯æŒæ–‡å­—ã€å›¾ç‰‡ã€è¡¨æƒ…æ¶ˆæ¯
- æ¶ˆæ¯é€šçŸ¥æé†’
- èŠå¤©è®°å½•ä¿å­˜

**æ ¡å‹åœ°å›¾**
- åœ°å›¾å±•ç¤ºæ ¡å‹åˆ†å¸ƒ
- æŒ‰åŸå¸‚/çœä»½ç»Ÿè®¡
- å‘ç°åŒåŸæ ¡å‹

#### 3.2.3 åŠ¨æ€æ¨¡å—

**å†…å®¹åˆ†ç±»**ï¼š
| åˆ†ç±» | å‘å¸ƒè€… | è¯´æ˜ |
|------|--------|------|
| å­¦æ ¡æ–°é—» | ç®¡ç†å‘˜ | å­¦æ ¡å®˜æ–¹æ–°é—»ã€è£èª‰æˆå°±ã€é‡å¤§äº‹ä»¶ |
| é€šçŸ¥å…¬å‘Š | ç®¡ç†å‘˜ | æ ¡å‹ä¼šé€šçŸ¥ã€æ´»åŠ¨å…¬å‘Š |
| æ ¡å‹åŠ¨æ€ | æ ¡å‹ | æ ¡å‹ä¸ªäººåˆ†äº«ã€ç”Ÿæ´»å·¥ä½œåŠ¨æ€ |
| æ ¡å‹é£é‡‡ | ç®¡ç†å‘˜ | ä¼˜ç§€æ ¡å‹ä¸“è®¿ã€æˆå°±å±•ç¤º |

**åŠŸèƒ½è¯´æ˜**ï¼š
- å­¦æ ¡æ–°é—»/é€šçŸ¥å…¬å‘Šï¼šä»…ç®¡ç†å‘˜å¯å‘å¸ƒï¼Œé¦–é¡µç½®é¡¶å±•ç¤º
- æ ¡å‹åŠ¨æ€ï¼šå·²è®¤è¯æ ¡å‹å¯å‘å¸ƒ
- æ ¡å‹é£é‡‡ï¼šç®¡ç†å‘˜é‡‡ç¼–ï¼Œå±•ç¤ºä¼˜ç§€æ ¡å‹æ•…äº‹

**äº’åŠ¨åŠŸèƒ½**
- ç‚¹èµ
- è¯„è®ºï¼ˆæ”¯æŒå›å¤ï¼‰
- è½¬å‘/åˆ†äº«

#### 3.2.4 æ´»åŠ¨æ¨¡å—

**æ´»åŠ¨ç±»å‹**
- æ ¡åº†æ´»åŠ¨
- æ ¡å‹èšä¼š
- è¡Œä¸šäº¤æµ
- è®²åº§/åˆ†äº«ä¼š
- å…¬ç›Šæ´»åŠ¨

**æ´»åŠ¨åŠŸèƒ½**
- æ´»åŠ¨å‘å¸ƒï¼ˆæ ‡é¢˜ã€æ—¶é—´ã€åœ°ç‚¹ã€ä»‹ç»ã€æŠ¥åé™åˆ¶ï¼‰
- æ´»åŠ¨æŠ¥åï¼ˆæ”¶é›†æŠ¥åä¿¡æ¯ï¼‰
- æŠ¥åç®¡ç†ï¼ˆå®¡æ ¸ã€å¯¼å‡ºåå•ï¼‰
- æ´»åŠ¨ç­¾åˆ°ï¼ˆæ‰«ç ç­¾åˆ°ï¼‰
- æ´»åŠ¨ç›¸å†Œï¼ˆç…§ç‰‡ä¸Šä¼ ä¸æµè§ˆï¼‰

#### 3.2.5 ç»„ç»‡æ¨¡å—

**ç»„ç»‡ç±»å‹**ï¼š
| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| region | åŒºåŸŸæ ¡å‹ä¼š | åŒ—äº¬æ ¡å‹ä¼šã€æ·±åœ³æ ¡å‹ä¼š |
| industry | è¡Œä¸šæ ¡å‹ä¼š | ITè¡Œä¸šæ ¡å‹ä¼šã€é‡‘èæ ¡å‹ä¼š |
| interest | å…´è¶£æ ¡å‹ä¼š | æ‘„å½±çˆ±å¥½è€…ã€ç¯®çƒæ ¡å‹ä¼š |
| grade | å±Šåˆ«ç»„ç»‡ | 2010å±Šæ ¡å‹ä¼š |
| class | ç­çº§ç»„ç»‡ | è®¡ç®—æœºå­¦é™¢2010çº§1ç­ |

**åˆ›å»ºæµç¨‹**ï¼š
1. å·²è®¤è¯æ ¡å‹å¡«å†™ç»„ç»‡ä¿¡æ¯ï¼Œæäº¤åˆ›å»ºç”³è¯·
2. ç³»ç»Ÿç®¡ç†å‘˜å®¡æ ¸ï¼ˆé˜²æ­¢é‡å¤ã€ä¸å½“å†…å®¹ï¼‰
3. å®¡æ ¸é€šè¿‡åç»„ç»‡ç”Ÿæ•ˆï¼Œè‡ªåŠ¨åˆ›å»ºç¾¤èŠ
4. åˆ›å»ºè€…æˆä¸ºç»„ç»‡åˆ›å»ºè€…ï¼ˆæœ€é«˜æƒé™ï¼‰

**ç»„ç»‡åŠŸèƒ½**ï¼š
- ç»„ç»‡ä¸»é¡µï¼ˆç®€ä»‹ã€æˆå‘˜ã€åŠ¨æ€ï¼‰
- åŠ å…¥/é€€å‡ºç»„ç»‡ï¼ˆå¯è®¾ç½®æ˜¯å¦éœ€å®¡æ ¸ï¼‰
- ç»„ç»‡å†…åŠ¨æ€å‘å¸ƒ
- ç»„ç»‡å†…æ´»åŠ¨å‘å¸ƒ
- ç»„ç»‡ç¾¤èŠï¼ˆåŸºäº uni-imï¼Œå®¡æ ¸é€šè¿‡åè‡ªåŠ¨åˆ›å»ºï¼‰

**è§’è‰²æƒé™**ï¼š
| è§’è‰² | æƒé™ |
|------|------|
| ç»„ç»‡åˆ›å»ºè€… | å…¨éƒ¨æƒé™ã€è½¬è®©ç»„ç»‡ã€è§£æ•£ç»„ç»‡ |
| ç»„ç»‡ç®¡ç†å‘˜ | å®¡æ ¸æˆå‘˜ã€å‘å¸ƒåŠ¨æ€/æ´»åŠ¨ã€ç®¡ç†ç¾¤èŠ |
| ç»„ç»‡æˆå‘˜ | æŸ¥çœ‹å†…å®¹ã€å‚ä¸äº’åŠ¨ã€å‘å¸ƒåŠ¨æ€ |

#### 3.2.6 é€šè®¯æ¨¡å—

**æ¶ˆæ¯ç±»å‹**
- ç³»ç»Ÿé€šçŸ¥ï¼ˆå®¡æ ¸ç»“æœã€æ´»åŠ¨æé†’ç­‰ï¼‰
- ç§ä¿¡æ¶ˆæ¯
- è¯„è®º/ç‚¹èµé€šçŸ¥
- å…¬å‘Šé€šçŸ¥

---

## å››ã€æ•°æ®åº“è®¾è®¡

### 4.1 å·²æœ‰é›†åˆï¼ˆuni-starter æä¾›ï¼‰

| é›†åˆå | è¯´æ˜ | å¤‡æ³¨ |
|--------|------|------|
| uni-id-users | ç”¨æˆ·è¡¨ | **éœ€æ‰©å±•**æ ¡å‹ä¿¡æ¯å­—æ®µ |
| uni-id-roles | è§’è‰²è¡¨ | å¤ç”¨ |
| uni-id-permissions | æƒé™è¡¨ | å¤ç”¨ |
| opendb-news-articles | æ–‡ç« /åŠ¨æ€è¡¨ | å¯ç”¨äºæ ¡å‹åŠ¨æ€ |
| opendb-news-comments | è¯„è®ºè¡¨ | å¤ç”¨ |
| opendb-news-categories | åˆ†ç±»è¡¨ | å¤ç”¨ |

### 4.2 éœ€æ‰©å±•å­—æ®µï¼ˆuni-id-usersï¼‰

åœ¨ `uni-id-users` è¡¨åŸºç¡€ä¸Šæ‰©å±•ä»¥ä¸‹å­—æ®µï¼š

```javascript
{
  // === uni-id å·²æœ‰å­—æ®µ ===
  _id, openid, unionid, phone, password,
  nickname, avatar, gender, birthday,

  // === æ–°å¢ï¼šåŸºæœ¬ä¿¡æ¯ ===
  realName: string,         // çœŸå®å§“å

  // === æ–°å¢ï¼šæ•™è‚²ç»å†ï¼ˆæ”¯æŒå¤šæ®µå­¦å†ï¼‰ ===
  educations: [
    {
      degree: string,         // å­¦å†: bachelor/master/doctor/highschool/middleschool
      enrollmentYear: number, // å…¥å­¦å¹´ä»½
      graduationYear: number, // æ¯•ä¸šå¹´ä»½
      studentId: string,      // å­¦å·
      className: string,      // ç­çº§

      // å¤§å­¦ä¸“ç”¨
      college: string,        // å­¦é™¢ï¼ˆä»…å¤§å­¦ï¼‰
      major: string,          // ä¸“ä¸šï¼ˆä»…å¤§å­¦ï¼‰

      // ä¸­å­¦ä¸“ç”¨
      grade: string,          // å¹´çº§ï¼ˆä»…ä¸­å­¦ï¼‰

      isPrimary: boolean,     // æ˜¯å¦ä¸»è¦å­¦å†ï¼ˆç”¨äºåˆ—è¡¨å±•ç¤ºï¼‰
    }
  ],

  // === æ–°å¢ï¼šèŒä¸šä¿¡æ¯ ===
  company: string,          // å…¬å¸
  position: string,         // èŒä½
  industry: string,         // è¡Œä¸š
  workCity: string,         // å·¥ä½œåŸå¸‚
  workProvince: string,     // å·¥ä½œçœä»½

  // === æ–°å¢ï¼šè”ç³»æ–¹å¼ ===
  email: string,            // é‚®ç®±
  wechatId: string,         // å¾®ä¿¡å·

  // === æ–°å¢ï¼šå…¶ä»– ===
  bio: string,              // ä¸ªäººç®€ä»‹
  tags: array,              // æ ‡ç­¾ï¼ˆæŠ€èƒ½/å…´è¶£ï¼‰

  // === æ–°å¢ï¼šè®¤è¯çŠ¶æ€ ===
  alumniStatus: number,     // æ ¡å‹è®¤è¯çŠ¶æ€: 0å¾…è®¤è¯ 1å·²è®¤è¯ 2å·²æ‹’ç»
  alumniVerifyTime: timestamp, // è®¤è¯æ—¶é—´
  alumniRejectReason: string,  // æ‹’ç»åŸå› 

  // === æ–°å¢ï¼šéšç§è®¾ç½® ===
  privacy: {
    showPhone: string,      // all/classmate/friend/none
    showWechat: string,
    showEmail: string,
    showCompany: string,
    showInMap: boolean,     // æ˜¯å¦æ˜¾ç¤ºåœ¨æ ¡å‹åœ°å›¾
  },
}
```

> **å­¦å†ç±»å‹ degree è¯´æ˜**ï¼š
> | å€¼ | è¯´æ˜ |
> |---|------|
> | bachelor | æœ¬ç§‘ |
> | master | ç¡•å£« |
> | doctor | åšå£« |
> | highschool | é«˜ä¸­ |
> | middleschool | åˆä¸­ |
>
> **å¤šæ®µå­¦å†ç¤ºä¾‹**ï¼š
> ```javascript
> educations: [
>   { degree: "bachelor", enrollmentYear: 2010, graduationYear: 2014,
>     college: "è®¡ç®—æœºå­¦é™¢", major: "è½¯ä»¶å·¥ç¨‹", isPrimary: false },
>   { degree: "master", enrollmentYear: 2014, graduationYear: 2017,
>     college: "è®¡ç®—æœºå­¦é™¢", major: "è®¡ç®—æœºç§‘å­¦", isPrimary: true }
> ]
> ```

### 4.3 æ–°å¢é›†åˆ

#### alumni-recommendations - æ ¡å‹æ¨èè¡¨
```javascript
{
  _id: string,
  targetUserId: string,     // è¢«æ¨èäººID
  recommenderUserId: string, // æ¨èäººID
  relationship: string,     // å…³ç³»è¯´æ˜ï¼ˆåŒç­/åŒé™¢/è®¤è¯†ç­‰ï¼‰
  createTime: timestamp,
}
// è§„åˆ™ï¼šåŒä¸€äººä¸èƒ½é‡å¤æ¨èï¼Œè¾¾åˆ°Näººæ¨èè‡ªåŠ¨é€šè¿‡è®¤è¯
```

#### alumni-activities - æ´»åŠ¨è¡¨
```javascript
{
  _id: string,
  title: string,            // æ´»åŠ¨æ ‡é¢˜
  cover: string,            // å°é¢å›¾
  content: string,          // æ´»åŠ¨è¯¦æƒ…ï¼ˆå¯Œæ–‡æœ¬ï¼‰
  type: string,             // æ´»åŠ¨ç±»å‹: reunion/lecture/exchange/charity

  startTime: timestamp,     // å¼€å§‹æ—¶é—´
  endTime: timestamp,       // ç»“æŸæ—¶é—´
  signupDeadline: timestamp,// æŠ¥åæˆªæ­¢æ—¶é—´

  location: string,         // æ´»åŠ¨åœ°ç‚¹
  address: string,          // è¯¦ç»†åœ°å€
  longitude: number,        // ç»åº¦
  latitude: number,         // çº¬åº¦

  maxParticipants: number,  // äººæ•°ä¸Šé™ï¼ˆ0ä¸ºä¸é™ï¼‰
  currentParticipants: number, // å½“å‰æŠ¥åäººæ•°
  fee: number,              // è´¹ç”¨ï¼ˆ0ä¸ºå…è´¹ï¼‰

  organizerId: string,      // ç»„ç»‡è€…ID
  status: number,           // çŠ¶æ€: 0è‰ç¨¿ 1æŠ¥åä¸­ 2è¿›è¡Œä¸­ 3å·²ç»“æŸ

  createTime: timestamp,
  updateTime: timestamp,
}
```

#### alumni-signups - æ´»åŠ¨æŠ¥åè¡¨
```javascript
{
  _id: string,
  activityId: string,       // æ´»åŠ¨ID
  userId: string,           // ç”¨æˆ·ID

  name: string,             // æŠ¥åå§“å
  phone: string,            // è”ç³»ç”µè¯
  remark: string,           // å¤‡æ³¨

  status: number,           // çŠ¶æ€: 0å¾…å®¡æ ¸ 1å·²é€šè¿‡ 2å·²æ‹’ç» 3å·²å–æ¶ˆ
  checkinTime: timestamp,   // ç­¾åˆ°æ—¶é—´

  createTime: timestamp,
}
```

#### alumni-school-config - å­¦æ ¡é…ç½®è¡¨
```javascript
{
  _id: string,
  name: string,             // å­¦æ ¡åç§°
  logo: string,             // å­¦æ ¡Logo
  type: string,             // ç±»å‹: university/highschool/middleschool

  // === å¤§å­¦ç»„ç»‡ç»“æ„ ===
  degrees: [string],        // æ”¯æŒçš„å­¦å†å±‚æ¬¡ï¼ˆä»…å¤§å­¦ï¼‰ï¼Œå¦‚ ["bachelor","master","doctor"]
  colleges: [               // å­¦é™¢åˆ—è¡¨ï¼ˆä»…å¤§å­¦ï¼‰
    {
      name: string,         // å­¦é™¢åç§°
      majors: [string]      // ä¸“ä¸šåˆ—è¡¨
    }
  ],

  // === ä¸­å­¦ç»„ç»‡ç»“æ„ ===
  grades: [string],         // å¹´çº§åˆ—è¡¨ï¼ˆä»…ä¸­å­¦ï¼‰ï¼Œå¦‚ ["é«˜ä¸€","é«˜äºŒ","é«˜ä¸‰"]

  config: {
    recommendCount: number,     // æ¨èè®¤è¯æ‰€éœ€äººæ•°ï¼ˆé»˜è®¤3ï¼Œè¶…è¿‡æ­¤æ•°è‡ªåŠ¨é€šè¿‡ï¼‰
    enableAutoVerify: boolean,  // å¯ç”¨æ¨èè‡ªåŠ¨è®¤è¯ï¼ˆé»˜è®¤trueï¼‰
  },

  createTime: timestamp,
  updateTime: timestamp,
}
```

#### alumni-organizations - ç»„ç»‡è¡¨
```javascript
{
  _id: string,
  name: string,             // ç»„ç»‡åç§°
  logo: string,             // ç»„ç»‡Logo
  type: string,             // ç±»å‹: region/industry/interest/grade/class
  description: string,      // ç»„ç»‡ç®€ä»‹

  // åˆ†ç±»ä¿¡æ¯ï¼ˆæ ¹æ®ç±»å‹ä½¿ç”¨ï¼‰
  region: string,           // åŒºåŸŸï¼ˆtype=regionæ—¶ï¼‰
  industry: string,         // è¡Œä¸šï¼ˆtype=industryæ—¶ï¼‰
  interest: string,         // å…´è¶£æ ‡ç­¾ï¼ˆtype=interestæ—¶ï¼‰
  enrollmentYear: number,   // å…¥å­¦å¹´ä»½ï¼ˆtype=grade/classæ—¶ï¼‰
  college: string,          // å­¦é™¢ï¼ˆtype=classæ—¶ï¼‰
  className: string,        // ç­çº§ï¼ˆtype=classæ—¶ï¼‰

  creatorId: string,        // åˆ›å»ºè€…ID
  memberCount: number,      // æˆå‘˜æ•°é‡

  // åŠ å…¥è®¾ç½®
  joinMode: string,         // åŠ å…¥æ–¹å¼: free(è‡ªç”±åŠ å…¥)/audit(éœ€å®¡æ ¸)

  // uni-im ç¾¤èŠ
  imGroupId: string,        // uni-im ç¾¤èŠIDï¼ˆå®¡æ ¸é€šè¿‡ååˆ›å»ºï¼‰

  // å®¡æ ¸ä¿¡æ¯
  status: number,           // çŠ¶æ€: 0å¾…å®¡æ ¸ 1æ­£å¸¸ 2å·²æ‹’ç» 3å·²è§£æ•£
  auditUserId: string,      // å®¡æ ¸äººID
  auditTime: timestamp,     // å®¡æ ¸æ—¶é—´
  auditRemark: string,      // å®¡æ ¸å¤‡æ³¨ï¼ˆæ‹’ç»åŸå› ï¼‰

  createTime: timestamp,
  updateTime: timestamp,
}
```

#### alumni-organization-members - ç»„ç»‡æˆå‘˜è¡¨
```javascript
{
  _id: string,
  orgId: string,            // ç»„ç»‡ID
  userId: string,           // ç”¨æˆ·ID
  role: string,             // è§’è‰²: creator/admin/member
  joinTime: timestamp,      // åŠ å…¥æ—¶é—´
  status: number,           // çŠ¶æ€: 0å¾…å®¡æ ¸ 1æ­£å¸¸ 2å·²é€€å‡º
}
```

#### alumni-card-requests - åç‰‡äº¤æ¢è¯·æ±‚è¡¨
```javascript
{
  _id: string,
  fromUserId: string,       // å‘èµ·äººID
  toUserId: string,         // æ¥æ”¶äººID
  message: string,          // è¯·æ±‚ç•™è¨€ï¼ˆå¦‚ï¼šæˆ‘æ˜¯XXå±Šçš„å­¦é•¿ï¼Œæƒ³è®¤è¯†ä¸€ä¸‹ï¼‰
  status: number,           // çŠ¶æ€: 0å¾…å¤„ç† 1å·²åŒæ„ 2å·²æ‹’ç» 3å·²è¿‡æœŸ

  rejectReason: string,     // æ‹’ç»åŸå› ï¼ˆå¯é€‰ï¼‰
  handleTime: timestamp,    // å¤„ç†æ—¶é—´
  expireTime: timestamp,    // è¿‡æœŸæ—¶é—´ï¼ˆ7å¤©åè‡ªåŠ¨è¿‡æœŸï¼‰

  createTime: timestamp,
}
// ç´¢å¼•ï¼šfromUserId, toUserId, status
// è§„åˆ™ï¼šåŒä¸€å¯¹ç”¨æˆ·ä¹‹é—´ï¼Œå¾…å¤„ç†çš„è¯·æ±‚åªèƒ½æœ‰ä¸€æ¡
```

#### alumni-friends - å¥½å‹å…³ç³»è¡¨
```javascript
{
  _id: string,
  userIdA: string,          // ç”¨æˆ·Açš„IDï¼ˆæŒ‰å­—æ¯åºè¾ƒå°çš„æ”¾å‰é¢ï¼‰
  userIdB: string,          // ç”¨æˆ·Bçš„IDï¼ˆæŒ‰å­—æ¯åºè¾ƒå¤§çš„æ”¾åé¢ï¼‰

  // ç”¨æˆ·Aå¯¹ç”¨æˆ·Bçš„è®¾ç½®
  remarkA: string,          // Aç»™Bçš„å¤‡æ³¨å
  // ç”¨æˆ·Bå¯¹ç”¨æˆ·Açš„è®¾ç½®
  remarkB: string,          // Bç»™Açš„å¤‡æ³¨å

  sourceRequestId: string,  // æ¥æºåç‰‡äº¤æ¢è¯·æ±‚ID

  status: number,           // çŠ¶æ€: 1æ­£å¸¸ 2å·²è§£é™¤ï¼ˆAåˆ é™¤Bï¼‰3å·²è§£é™¤ï¼ˆBåˆ é™¤Aï¼‰4åŒå‘è§£é™¤

  createTime: timestamp,    // æˆä¸ºå¥½å‹æ—¶é—´
  updateTime: timestamp,
}
// ç´¢å¼•ï¼šuserIdA + userIdB (è”åˆå”¯ä¸€ç´¢å¼•)
// è¯´æ˜ï¼šé€šè¿‡å›ºå®šç”¨æˆ·IDé¡ºåºï¼Œé¿å…é‡å¤è®°å½•ï¼ˆA-B å’Œ B-A æ˜¯åŒä¸€æ¡è®°å½•ï¼‰
```

> **å¥½å‹å…³ç³»æŸ¥è¯¢ç¤ºä¾‹**ï¼š
> ```javascript
> // æŸ¥è¯¢ç”¨æˆ· userId çš„æ‰€æœ‰å¥½å‹
> db.collection('alumni-friends')
>   .where(dbCmd.or([
>     { userIdA: userId, status: 1 },
>     { userIdB: userId, status: 1 }
>   ]))
>   .get()
> ```

> **ç»„ç»‡ç»“æ„ç¤ºä¾‹**ï¼š
> ```javascript
> // å¤§å­¦ç¤ºä¾‹ï¼ˆæ”¯æŒæœ¬ç¡•åšï¼‰
> {
>   type: "university",
>   degrees: ["bachelor", "master", "doctor"],
>   colleges: [
>     { name: "è®¡ç®—æœºå­¦é™¢", majors: ["è½¯ä»¶å·¥ç¨‹", "è®¡ç®—æœºç§‘å­¦", "äººå·¥æ™ºèƒ½"] },
>     { name: "å•†å­¦é™¢", majors: ["å·¥å•†ç®¡ç†", "å¸‚åœºè¥é”€", "ä¼šè®¡å­¦"] }
>   ]
> }
>
> // é«˜ä¸­ç¤ºä¾‹
> { type: "highschool", grades: ["é«˜ä¸€", "é«˜äºŒ", "é«˜ä¸‰"] }
>
> // åˆä¸­ç¤ºä¾‹
> { type: "middleschool", grades: ["åˆä¸€", "åˆäºŒ", "åˆä¸‰"] }
> ```

---

## äº”ã€é¡µé¢è®¾è®¡

### 5.1 å·²æœ‰é¡µé¢ï¼ˆuni-starter æä¾›ï¼‰

| é¡µé¢ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| åˆ—è¡¨é¡µ | pages/list/list | å¯æ”¹é€ ä¸ºåŠ¨æ€åˆ—è¡¨ |
| è¯¦æƒ…é¡µ | pages/list/detail | å¯å¤ç”¨ |
| æœç´¢é¡µ | pages/list/search | å¯å¤ç”¨ |
| å®«æ ¼é¡µ | pages/grid/grid | å¯æ”¹é€ ä¸ºåŠŸèƒ½å…¥å£ |
| ç”¨æˆ·ä¸­å¿ƒ | pages/ucenter/ucenter | éœ€æ‰©å±•æ ¡å‹ä¿¡æ¯ |
| è®¾ç½®é¡µ | pages/ucenter/settings | å¯å¤ç”¨ |
| ç™»å½•é¡µ | uni-id-pages | å·²å®Œæ•´å®ç° |
| ç”¨æˆ·ä¿¡æ¯ | uni-id-pages/userinfo | éœ€æ‰©å±•æ ¡å‹å­—æ®µ |

### 5.2 éœ€æ–°å¢é¡µé¢

```
pages/
â”œâ”€â”€ alumni/                 # æ ¡å‹å½•ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ search.vue         # æ‰¾æ ¡å‹ï¼ˆå¤šæ¡ä»¶ç­›é€‰æœç´¢ï¼‰
â”‚   â”œâ”€â”€ list.vue           # æ ¡å‹åˆ—è¡¨ï¼ˆæœç´¢ç»“æœï¼‰
â”‚   â”œâ”€â”€ detail.vue         # æ ¡å‹åç‰‡è¯¦æƒ…
â”‚   â””â”€â”€ map.vue            # æ ¡å‹åœ°å›¾ï¼ˆP2ï¼‰
â”œâ”€â”€ friend/                 # å¥½å‹æ¨¡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ list.vue           # å¥½å‹åˆ—è¡¨
â”‚   â”œâ”€â”€ requests.vue       # åç‰‡äº¤æ¢è¯·æ±‚ï¼ˆæ”¶åˆ°çš„/å‘å‡ºçš„ï¼‰
â”‚   â””â”€â”€ detail.vue         # å¥½å‹è¯¦æƒ…ï¼ˆå¯æŸ¥çœ‹å®Œæ•´ä¿¡æ¯ï¼‰
â”œâ”€â”€ verify/                 # æ ¡å‹è®¤è¯ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ index.vue          # è®¤è¯é¦–é¡µ/çŠ¶æ€
â”‚   â”œâ”€â”€ form.vue           # è®¤è¯è¡¨å•ï¼ˆå¡«å†™å…¥å­¦ä¿¡æ¯ï¼‰
â”‚   â””â”€â”€ recommend.vue      # é‚€è¯·æ ¡å‹æ¨è
â”œâ”€â”€ activity/               # æ´»åŠ¨æ¨¡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ list.vue           # æ´»åŠ¨åˆ—è¡¨
â”‚   â”œâ”€â”€ detail.vue         # æ´»åŠ¨è¯¦æƒ…
â”‚   â”œâ”€â”€ signup.vue         # æŠ¥åè¡¨å•
â”‚   â””â”€â”€ checkin.vue        # æ‰«ç ç­¾åˆ°
â”œâ”€â”€ organization/           # ç»„ç»‡æ¨¡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ list.vue           # ç»„ç»‡åˆ—è¡¨ï¼ˆæŒ‰ç±»å‹ç­›é€‰ï¼‰
â”‚   â”œâ”€â”€ detail.vue         # ç»„ç»‡ä¸»é¡µï¼ˆç®€ä»‹ã€æˆå‘˜ã€åŠ¨æ€ï¼‰
â”‚   â”œâ”€â”€ create.vue         # åˆ›å»ºç»„ç»‡
â”‚   â”œâ”€â”€ members.vue        # æˆå‘˜ç®¡ç†
â”‚   â””â”€â”€ settings.vue       # ç»„ç»‡è®¾ç½®
â”œâ”€â”€ privacy/                # éšç§è®¾ç½®ï¼ˆæ–°å¢ï¼‰
â”‚   â””â”€â”€ index.vue          # éšç§æ§åˆ¶é¡µ
â””â”€â”€ æ”¹é€ å·²æœ‰é¡µé¢
    â”œâ”€â”€ ucenter/ucenter    # æ‰©å±•æ ¡å‹ä¿¡æ¯å±•ç¤º
    â”œâ”€â”€ grid/grid          # æ”¹é€ ä¸ºåŠŸèƒ½å®«æ ¼å…¥å£
    â””â”€â”€ list/list          # æ”¹é€ ä¸ºæ ¡å‹åŠ¨æ€
```

### 5.3 åº•éƒ¨å¯¼èˆªï¼ˆè°ƒæ•´ï¼‰

| Tab | å›¾æ ‡ | é¡µé¢ | è¯´æ˜ |
|-----|------|------|------|
| é¦–é¡µ | home | pages/index/index | æ–°é—»åŠ¨æ€ + æ ¡å‹åŠ¨æ€ |
| æ ¡å‹å½• | contact | pages/alumni/list | **æ–°å¢** |
| æ´»åŠ¨ | calendar | pages/activity/list | **æ–°å¢** |
| æ¶ˆæ¯ | chat | uni-im é¡µé¢ | é›†æˆ uni-im |
| æˆ‘çš„ | person | pages/ucenter/ucenter | æ‰©å±• |

### 5.4 é¦–é¡µç»“æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å­¦æ ¡Logo    æ ¡å‹ä¼šåç§°      â”‚ â† é¡¶éƒ¨å¯¼èˆª
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [è½®æ’­å›¾/Banner]            â”‚ â† é‡è¦é€šçŸ¥ã€æ´»åŠ¨å®£ä¼ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å­¦æ ¡æ–°é—» | é€šçŸ¥å…¬å‘Š | æ ¡å‹åŠ¨æ€ â”‚ â† Tab åˆ‡æ¢
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“° æˆ‘æ ¡è£è·...       â”‚   â”‚
â”‚  â”‚ 2026-01-10  ğŸ‘128   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“¢ æ ¡åº†æ´»åŠ¨é€šçŸ¥      â”‚   â”‚
â”‚  â”‚ 2026-01-08  ğŸ‘256   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ...                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 UI è®¾è®¡è§„èŒƒ

#### 5.5.1 è®¾è®¡ç†å¿µ

| ä¸»é¢˜ | è¯´æ˜ | ä½“ç°æ–¹å¼ |
|------|------|----------|
| **ç§¯æå‘ä¸Š** | ä¼ é€’æ­£èƒ½é‡ï¼Œæ¿€åŠ±æ ¡å‹ | æ˜äº®è‰²è°ƒã€å‘ä¸Šç®­å¤´å›¾æ ‡ã€æˆé•¿æ›²çº¿å…ƒç´  |
| **çˆ±å­¦ä¹ ** | å­¦æœ¯æ°›å›´ï¼ŒçŸ¥è¯†ä¼ æ‰¿ | ä¹¦æœ¬/å­¦ä½å¸½å›¾æ ‡ã€ç®€æ´æ’ç‰ˆã€çŸ¥è¯†å¡ç‰‡ |
| **å…³å¿ƒæ¯æ ¡** | æƒ…æ„Ÿè”ç»“ï¼Œå½’å±æ„Ÿ | æ ¡å›­å…ƒç´ ã€æ ¡å¾½èå…¥ã€æ ¡åº†å€’è®¡æ—¶ |
| **ä¸“ä¸šå¯ä¿¡** | æ­£å¼åœºåˆï¼Œä¿¡æ¯å‡†ç¡® | è§„èŒƒå­—ä½“ã€æ¸…æ™°å±‚çº§ã€é€‚åº¦ç•™ç™½ |

#### 5.5.2 è§†è§‰è§„èŒƒ

**åœ†è§’è§„èŒƒ**ï¼š
| å…ƒç´  | åœ†è§’å€¼ | è¯´æ˜ |
|------|--------|------|
| æŒ‰é’® | 8rpx | å°åœ†è§’ï¼Œç°ä»£æ„Ÿ |
| å¡ç‰‡ | 16rpx | ä¸­ç­‰åœ†è§’ï¼ŒæŸ”å’Œ |
| å¤´åƒ | 50% | åœ†å½¢å¤´åƒ |
| è¾“å…¥æ¡† | 8rpx | ä¸æŒ‰é’®ä¿æŒä¸€è‡´ |
| å¼¹çª—/æ¨¡æ€æ¡† | 24rpx | å¤§åœ†è§’ï¼Œçªå‡ºå±‚çº§ |

**é—´è·è§„èŒƒ**ï¼š
| åœºæ™¯ | é—´è·å€¼ | è¯´æ˜ |
|------|--------|------|
| é¡µé¢è¾¹è· | 32rpx | é¡µé¢å·¦å³ç•™ç™½ |
| å¡ç‰‡é—´è· | 24rpx | å¡ç‰‡ä¹‹é—´çš„å‚ç›´é—´è· |
| å†…å®¹é—´è· | 16rpx | å¡ç‰‡å†…éƒ¨å…ƒç´ é—´è· |
| ç´§å‡‘é—´è· | 8rpx | ç›¸å…³å…ƒç´ é—´çš„å°é—´è· |

**å­—ä½“è§„èŒƒ**ï¼š
| ç±»å‹ | å¤§å° | å­—é‡ | ç”¨é€” |
|------|------|------|------|
| å¤§æ ‡é¢˜ | 40rpx | 600 | é¡µé¢æ ‡é¢˜ |
| æ ‡é¢˜ | 34rpx | 500 | å¡ç‰‡æ ‡é¢˜ã€åˆ—è¡¨é¡¹æ ‡é¢˜ |
| æ­£æ–‡ | 28rpx | 400 | ä¸»è¦å†…å®¹ |
| è¾…åŠ©æ–‡å­— | 24rpx | 400 | æ—¶é—´ã€æè¿°ã€æç¤º |
| å°å­— | 22rpx | 400 | æ ‡ç­¾ã€è§’æ ‡ |

**é˜´å½±è§„èŒƒ**ï¼š
```scss
// å¡ç‰‡é˜´å½±ï¼ˆè½»æŸ”ï¼‰
$shadow-card: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);
// æµ®å±‚é˜´å½±ï¼ˆæ˜æ˜¾ï¼‰
$shadow-popup: 0 8rpx 32rpx rgba(0, 0, 0, 0.12);
// æŒ‰é’®é˜´å½±ï¼ˆèšç„¦ï¼‰
$shadow-button: 0 4rpx 12rpx rgba(var(--primary-rgb), 0.3);
```

#### 5.5.3 å›¾æ ‡è§„èŒƒ

ä½¿ç”¨ uni-icons å®˜æ–¹å›¾æ ‡åº“ï¼Œä¿æŒé£æ ¼ç»Ÿä¸€ï¼š

| åœºæ™¯ | å›¾æ ‡å | ç”¨é€” |
|------|--------|------|
| é¦–é¡µ | home-filled | TabBar |
| æ ¡å‹å½• | person-filled | TabBar |
| æ´»åŠ¨ | calendar-filled | TabBar |
| æ¶ˆæ¯ | chat-filled | TabBar |
| æˆ‘çš„ | person-filled | TabBar |
| æœç´¢ | search | æœç´¢æ¡† |
| ç­›é€‰ | tune | ç­›é€‰æŒ‰é’® |
| è®¤è¯ | auth | è®¤è¯æ ‡è¯† |
| ä½ç½® | location | åœ°å€ä¿¡æ¯ |
| å…¬å¸ | office-building | å·¥ä½œä¿¡æ¯ |

### 5.6 ä¸»é¢˜æ¢è‚¤æœºåˆ¶

#### 5.6.1 ä¸»é¢˜æ¶æ„

```
styles/
â”œâ”€â”€ themes/
â”‚   â”œâ”€â”€ variables.scss      # CSSå˜é‡å®šä¹‰ï¼ˆä¸»æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ default.scss        # é»˜è®¤ä¸»é¢˜ï¼ˆå­¦é™¢è“ï¼‰
â”‚   â”œâ”€â”€ tsinghua.scss       # æ¸…åä¸»é¢˜ç¤ºä¾‹ï¼ˆç´«è‰²ï¼‰
â”‚   â”œâ”€â”€ pku.scss            # åŒ—å¤§ä¸»é¢˜ç¤ºä¾‹ï¼ˆçº¢è‰²ï¼‰
â”‚   â””â”€â”€ custom.scss         # è‡ªå®šä¹‰ä¸»é¢˜æ¨¡æ¿
â”œâ”€â”€ mixins.scss             # é€šç”¨æ··å…¥
â”œâ”€â”€ common.scss             # å…¬å…±æ ·å¼
â””â”€â”€ uni.scss                # uni-app æ ·å¼å…¥å£
```

#### 5.6.2 CSS å˜é‡å®šä¹‰

```scss
// styles/themes/variables.scss
:root {
  // ==================== å“ç‰Œè‰² ====================
  --primary-color: #2B5CE6;           // ä¸»è‰²è°ƒ
  --primary-light: #5B7FED;           // ä¸»è‰²è°ƒ-æµ…
  --primary-dark: #1E3FA8;            // ä¸»è‰²è°ƒ-æ·±
  --primary-rgb: 43, 92, 230;         // ä¸»è‰²è°ƒRGBå€¼ï¼ˆç”¨äºé€æ˜åº¦ï¼‰

  --secondary-color: #F39C12;         // è¾…åŠ©è‰²ï¼ˆå¼ºè°ƒã€å¾½ç« ï¼‰
  --accent-color: #27AE60;            // ç‚¹ç¼€è‰²ï¼ˆæˆåŠŸã€åœ¨çº¿ï¼‰

  // ==================== åŠŸèƒ½è‰² ====================
  --success-color: #27AE60;           // æˆåŠŸ
  --warning-color: #F39C12;           // è­¦å‘Š
  --error-color: #E74C3C;             // é”™è¯¯
  --info-color: #3498DB;              // ä¿¡æ¯

  // ==================== ä¸­æ€§è‰² ====================
  --text-primary: #1A1A1A;            // ä¸»è¦æ–‡å­—
  --text-secondary: #666666;          // æ¬¡è¦æ–‡å­—
  --text-placeholder: #999999;        // å ä½æ–‡å­—
  --text-disabled: #CCCCCC;           // ç¦ç”¨æ–‡å­—
  --text-inverse: #FFFFFF;            // åè‰²æ–‡å­—ï¼ˆæ·±è‰²èƒŒæ™¯ä¸Šï¼‰

  // ==================== èƒŒæ™¯è‰² ====================
  --bg-page: #F5F7FA;                 // é¡µé¢èƒŒæ™¯
  --bg-card: #FFFFFF;                 // å¡ç‰‡èƒŒæ™¯
  --bg-hover: #F0F2F5;                // æ‚¬åœèƒŒæ™¯
  --bg-active: #E8ECF0;               // æ¿€æ´»èƒŒæ™¯
  --bg-mask: rgba(0, 0, 0, 0.5);      // é®ç½©èƒŒæ™¯

  // ==================== è¾¹æ¡†è‰² ====================
  --border-color: #E8E8E8;            // æ™®é€šè¾¹æ¡†
  --border-light: #F0F0F0;            // æµ…è‰²è¾¹æ¡†
  --divider-color: #EEEEEE;           // åˆ†å‰²çº¿

  // ==================== ç‰¹æ®Šåœºæ™¯ ====================
  --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
  --verified-color: #2B5CE6;          // è®¤è¯æ ‡è¯†è‰²
  --online-color: #27AE60;            // åœ¨çº¿çŠ¶æ€è‰²
  --vip-color: #F39C12;               // VIP/ç‰¹æ®Šèº«ä»½è‰²
}
```

#### 5.6.3 ä¸»é¢˜ç¤ºä¾‹

```scss
// styles/themes/default.scss - é»˜è®¤ä¸»é¢˜ï¼ˆå­¦é™¢è“ï¼‰
// ç§¯æå‘ä¸Šã€ä¸“ä¸šå¯ä¿¡çš„å­¦é™¢é£æ ¼
:root {
  --primary-color: #2B5CE6;
  --primary-light: #5B7FED;
  --primary-dark: #1E3FA8;
  --primary-rgb: 43, 92, 230;
  --secondary-color: #F39C12;
  --accent-color: #27AE60;
}

// styles/themes/tsinghua.scss - æ¸…åä¸»é¢˜ï¼ˆç´«è‰²ï¼‰
:root {
  --primary-color: #660874;
  --primary-light: #8B2A9B;
  --primary-dark: #4A0654;
  --primary-rgb: 102, 8, 116;
  --secondary-color: #F39C12;
  --accent-color: #27AE60;
}

// styles/themes/pku.scss - åŒ—å¤§ä¸»é¢˜ï¼ˆçº¢è‰²ï¼‰
:root {
  --primary-color: #94070A;
  --primary-light: #B52B2E;
  --primary-dark: #700507;
  --primary-rgb: 148, 7, 10;
  --secondary-color: #F39C12;
  --accent-color: #27AE60;
}
```

#### 5.6.4 ä¸»é¢˜åˆ‡æ¢å®ç°

```typescript
// composables/useTheme.ts
import { ref } from 'vue'

export type ThemeName = 'default' | 'tsinghua' | 'pku' | 'custom'

interface ThemeConfig {
  primaryColor: string
  primaryLight: string
  primaryDark: string
  primaryRgb: string
  secondaryColor: string
  accentColor: string
  logo?: string           // å­¦æ ¡Logo
  name?: string           // å­¦æ ¡åç§°
}

// é¢„è®¾ä¸»é¢˜é…ç½®
const themes: Record<ThemeName, ThemeConfig> = {
  default: {
    primaryColor: '#2B5CE6',
    primaryLight: '#5B7FED',
    primaryDark: '#1E3FA8',
    primaryRgb: '43, 92, 230',
    secondaryColor: '#F39C12',
    accentColor: '#27AE60'
  },
  tsinghua: {
    primaryColor: '#660874',
    primaryLight: '#8B2A9B',
    primaryDark: '#4A0654',
    primaryRgb: '102, 8, 116',
    secondaryColor: '#F39C12',
    accentColor: '#27AE60'
  },
  pku: {
    primaryColor: '#94070A',
    primaryLight: '#B52B2E',
    primaryDark: '#700507',
    primaryRgb: '148, 7, 10',
    secondaryColor: '#F39C12',
    accentColor: '#27AE60'
  },
  custom: {
    primaryColor: '#2B5CE6',
    primaryLight: '#5B7FED',
    primaryDark: '#1E3FA8',
    primaryRgb: '43, 92, 230',
    secondaryColor: '#F39C12',
    accentColor: '#27AE60'
  }
}

const currentTheme = ref<ThemeName>('default')

export function useTheme() {
  /**
   * åˆ‡æ¢ä¸»é¢˜
   */
  const setTheme = (themeName: ThemeName, customConfig?: Partial<ThemeConfig>) => {
    const config = customConfig
      ? { ...themes[themeName], ...customConfig }
      : themes[themeName]

    // æ›´æ–° CSS å˜é‡
    const root = document.documentElement
    root.style.setProperty('--primary-color', config.primaryColor)
    root.style.setProperty('--primary-light', config.primaryLight)
    root.style.setProperty('--primary-dark', config.primaryDark)
    root.style.setProperty('--primary-rgb', config.primaryRgb)
    root.style.setProperty('--secondary-color', config.secondaryColor)
    root.style.setProperty('--accent-color', config.accentColor)

    currentTheme.value = themeName

    // æŒä¹…åŒ–å­˜å‚¨
    uni.setStorageSync('theme', themeName)
    if (customConfig) {
      uni.setStorageSync('themeConfig', customConfig)
    }
  }

  /**
   * ä»æœåŠ¡å™¨åŠ è½½å­¦æ ¡ä¸»é¢˜é…ç½®
   */
  const loadSchoolTheme = async () => {
    try {
      const commonObj = uniCloud.importObject('common')
      const config = await commonObj.getSchoolConfig()

      if (config.theme) {
        setTheme('custom', config.theme)
      }
    } catch (e) {
      console.warn('åŠ è½½å­¦æ ¡ä¸»é¢˜å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤ä¸»é¢˜')
    }
  }

  /**
   * åˆå§‹åŒ–ä¸»é¢˜ï¼ˆAppå¯åŠ¨æ—¶è°ƒç”¨ï¼‰
   */
  const initTheme = () => {
    const savedTheme = uni.getStorageSync('theme') as ThemeName
    const savedConfig = uni.getStorageSync('themeConfig')

    if (savedTheme) {
      setTheme(savedTheme, savedConfig)
    } else {
      loadSchoolTheme()
    }
  }

  return {
    currentTheme,
    themes,
    setTheme,
    initTheme,
    loadSchoolTheme
  }
}
```

#### 5.6.5 ç»„ä»¶ä¸­ä½¿ç”¨ä¸»é¢˜

```vue
<!-- components/AlumniCard.vue -->
<template>
  <view class="alumni-card">
    <image class="avatar" :src="alumni.avatar" />
    <view class="info">
      <text class="name">{{ alumni.realName }}</text>
      <view class="verified" v-if="alumni.alumniStatus === 1">
        <uni-icons type="auth" color="var(--verified-color)" size="14" />
        <text>å·²è®¤è¯</text>
      </view>
    </view>
    <button class="btn-primary" @click="exchangeCard">äº¤æ¢åç‰‡</button>
  </view>
</template>

<style lang="scss" scoped>
.alumni-card {
  background: var(--bg-card);
  border-radius: 16rpx;
  padding: 24rpx;
  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);

  .name {
    color: var(--text-primary);
    font-size: 34rpx;
    font-weight: 500;
  }

  .verified {
    color: var(--verified-color);
    font-size: 24rpx;
  }

  .btn-primary {
    background: var(--gradient-primary);
    color: var(--text-inverse);
    border: none;
    border-radius: 8rpx;
    padding: 16rpx 32rpx;
    font-size: 28rpx;

    &:active {
      opacity: 0.9;
    }
  }
}
</style>
```

#### 5.6.6 å­¦æ ¡é…ç½®è¡¨æ‰©å±•

```javascript
// alumni-school-config è¡¨å¢åŠ ä¸»é¢˜é…ç½®
{
  _id: string,
  name: string,             // å­¦æ ¡åç§°
  logo: string,             // å­¦æ ¡Logo
  type: string,             // ç±»å‹

  // === æ–°å¢ï¼šä¸»é¢˜é…ç½® ===
  theme: {
    primaryColor: string,   // ä¸»è‰²è°ƒï¼ˆå¦‚ #660874ï¼‰
    primaryLight: string,   // ä¸»è‰²è°ƒ-æµ…
    primaryDark: string,    // ä¸»è‰²è°ƒ-æ·±
    secondaryColor: string, // è¾…åŠ©è‰²
    accentColor: string,    // ç‚¹ç¼€è‰²
  },

  // === æ–°å¢ï¼šå“ç‰Œé…ç½® ===
  branding: {
    appName: string,        // å°ç¨‹åºåç§°ï¼ˆå¦‚"æ¸…åæ ¡å‹ä¼š"ï¼‰
    slogan: string,         // æ ‡è¯­ï¼ˆå¦‚"è‡ªå¼ºä¸æ¯ï¼Œåšå¾·è½½ç‰©"ï¼‰
    welcomeText: string,    // æ¬¢è¿è¯­
    copyrightText: string,  // ç‰ˆæƒä¿¡æ¯
  },

  // ... å…¶ä»–é…ç½®
}
```

### 5.7 å‰ç«¯ TypeScript å¼€å‘è§„èŒƒ

> **è¯´æ˜**ï¼šå‰ç«¯ä½¿ç”¨ TypeScript å¼€å‘ï¼Œäº‘å¯¹è±¡ä½¿ç”¨ JavaScript + JSDoc æ³¨é‡Šã€‚

#### 5.7.1 ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ types/                    # ç±»å‹å®šä¹‰ï¼ˆå‰ç«¯ï¼‰
â”‚   â”œâ”€â”€ alumni.d.ts          # æ ¡å‹ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ friend.d.ts          # å¥½å‹ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ activity.d.ts        # æ´»åŠ¨ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ api.d.ts             # APIå“åº”ç±»å‹
â”‚   â””â”€â”€ index.d.ts           # ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ composables/              # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useTheme.ts          # ä¸»é¢˜ç®¡ç†
â”‚   â”œâ”€â”€ useAuth.ts           # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ useFriend.ts         # å¥½å‹æ“ä½œ
â”‚   â””â”€â”€ useAlumni.ts         # æ ¡å‹æœç´¢
â”œâ”€â”€ api/                      # API å°è£…
â”‚   â”œâ”€â”€ alumni.ts            # æ ¡å‹æ¥å£
â”‚   â”œâ”€â”€ friend.ts            # å¥½å‹æ¥å£
â”‚   â””â”€â”€ index.ts             # ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ format.ts            # æ ¼å¼åŒ–
â”‚   â”œâ”€â”€ validate.ts          # éªŒè¯
â”‚   â””â”€â”€ storage.ts           # å­˜å‚¨
â””â”€â”€ stores/                   # çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰
    â”œâ”€â”€ user.ts              # ç”¨æˆ·çŠ¶æ€
    â””â”€â”€ app.ts               # åº”ç”¨çŠ¶æ€

uniCloud/
â””â”€â”€ cloudfunctions/           # äº‘å¯¹è±¡ï¼ˆJavaScriptï¼‰
    â”œâ”€â”€ alumni/
    â”‚   â””â”€â”€ index.obj.js     # æ ¡å‹äº‘å¯¹è±¡
    â”œâ”€â”€ friend/
    â”‚   â””â”€â”€ index.obj.js     # å¥½å‹äº‘å¯¹è±¡
    â””â”€â”€ common/
        â””â”€â”€ index.obj.js     # é€šç”¨äº‘å¯¹è±¡
```

#### 5.7.2 ç±»å‹å®šä¹‰ç¤ºä¾‹

```typescript
// types/alumni.d.ts

/** æ•™è‚²ç»å† */
export interface Education {
  degree: 'bachelor' | 'master' | 'doctor' | 'highschool' | 'middleschool'
  enrollmentYear: number
  graduationYear: number
  studentId?: string
  className?: string
  college?: string      // å¤§å­¦ä¸“ç”¨
  major?: string        // å¤§å­¦ä¸“ç”¨
  grade?: string        // ä¸­å­¦ä¸“ç”¨
  isPrimary: boolean
}

/** éšç§è®¾ç½® */
export interface PrivacySettings {
  showPhone: 'all' | 'classmate' | 'friend' | 'none'
  showWechat: 'all' | 'classmate' | 'friend' | 'none'
  showEmail: 'all' | 'classmate' | 'friend' | 'none'
  showCompany: 'all' | 'classmate' | 'friend' | 'none'
  showInMap: boolean
}

/** æ ¡å‹è®¤è¯çŠ¶æ€ */
export enum AlumniStatus {
  Pending = 0,      // å¾…è®¤è¯
  Verified = 1,     // å·²è®¤è¯
  Rejected = 2      // å·²æ‹’ç»
}

/** æ ¡å‹ä¿¡æ¯ */
export interface AlumniProfile {
  _id: string
  avatar: string
  realName: string
  nickname?: string
  gender?: number

  // æ•™è‚²ä¿¡æ¯
  educations: Education[]

  // èŒä¸šä¿¡æ¯
  company?: string
  position?: string
  industry?: string
  workCity?: string
  workProvince?: string

  // å…¶ä»–
  bio?: string
  tags?: string[]

  // è®¤è¯çŠ¶æ€
  alumniStatus: AlumniStatus
  alumniVerifyTime?: string

  // éšç§è®¾ç½®
  privacy?: PrivacySettings
}

/** æ ¡å‹åˆ—è¡¨é¡¹ï¼ˆç®€åŒ–ç‰ˆï¼Œç”¨äºåˆ—è¡¨å±•ç¤ºï¼‰ */
export interface AlumniListItem {
  _id: string
  avatar: string
  realName: string
  enrollmentYear: number
  graduationYear: number
  college?: string
  industry?: string
  company?: string
  position?: string
  workCity?: string
  tags?: string[]
  isFriend: boolean
  hasPendingRequest: boolean
}

/** æœç´¢å‚æ•° */
export interface AlumniSearchParams {
  enrollmentYear?: number
  industry?: string
  interests?: string[]
  city?: string
  college?: string
  major?: string
  keyword?: string
  lastId?: string
  pageSize?: number
}

/** åˆ†é¡µç»“æœ */
export interface PageResult<T> {
  list: T[]
  total: number
  hasMore: boolean
  lastId?: string
}
```

#### 5.7.3 API å°è£…ç¤ºä¾‹

```typescript
// api/alumni.ts
import type { AlumniSearchParams, AlumniListItem, AlumniProfile, PageResult } from '@/types/alumni'

const alumniObj = uniCloud.importObject('alumni')

export const alumniApi = {
  /**
   * æœç´¢æ ¡å‹
   */
  async search(params: AlumniSearchParams): Promise<PageResult<AlumniListItem>> {
    return await alumniObj.search(params)
  },

  /**
   * è·å–æ ¡å‹è¯¦æƒ…
   */
  async getProfile(userId: string): Promise<AlumniProfile> {
    return await alumniObj.getProfile(userId)
  },

  /**
   * è·å–ç­›é€‰é€‰é¡¹
   */
  async getFilterOptions(type: 'year' | 'industry' | 'interest' | 'city' | 'college') {
    return await alumniObj.getFilterOptions(type)
  },

  /**
   * è·å–æ¨èæ ¡å‹
   */
  async getRecommended(limit: number = 10): Promise<AlumniListItem[]> {
    return await alumniObj.getRecommended(limit)
  }
}
```

#### 5.7.4 ç»„åˆå¼å‡½æ•°ç¤ºä¾‹

```typescript
// composables/useAlumni.ts
import { ref, reactive } from 'vue'
import { alumniApi } from '@/api/alumni'
import type { AlumniSearchParams, AlumniListItem } from '@/types/alumni'

export function useAlumniSearch() {
  const loading = ref(false)
  const list = ref<AlumniListItem[]>([])
  const hasMore = ref(true)
  const lastId = ref<string>()

  const params = reactive<AlumniSearchParams>({
    pageSize: 20
  })

  /**
   * æœç´¢æ ¡å‹
   */
  const search = async (reset: boolean = false) => {
    if (loading.value) return
    if (!reset && !hasMore.value) return

    loading.value = true

    try {
      if (reset) {
        list.value = []
        lastId.value = undefined
      }

      const result = await alumniApi.search({
        ...params,
        lastId: lastId.value
      })

      list.value = reset ? result.list : [...list.value, ...result.list]
      hasMore.value = result.hasMore
      lastId.value = result.lastId
    } finally {
      loading.value = false
    }
  }

  /**
   * æ›´æ–°ç­›é€‰æ¡ä»¶å¹¶é‡æ–°æœç´¢
   */
  const updateFilter = (key: keyof AlumniSearchParams, value: any) => {
    params[key] = value
    search(true)
  }

  /**
   * é‡ç½®ç­›é€‰æ¡ä»¶
   */
  const resetFilter = () => {
    Object.keys(params).forEach(key => {
      if (key !== 'pageSize') {
        delete params[key as keyof AlumniSearchParams]
      }
    })
    search(true)
  }

  return {
    loading,
    list,
    hasMore,
    params,
    search,
    updateFilter,
    resetFilter
  }
}
```

---

## å…­ã€æ¥å£è®¾è®¡

> **æŠ€æœ¯é€‰å‹**ï¼šåç«¯ç»Ÿä¸€ä½¿ç”¨ **äº‘å¯¹è±¡ï¼ˆuni-cloud-objectï¼‰** æ–¹å¼å¼€å‘ï¼Œç›¸æ¯”äº‘å‡½æ•°æ›´ç®€æ´ã€ç±»å‹å‹å¥½ã€ä¾¿äºç»´æŠ¤ã€‚

### 6.1 äº‘å¯¹è±¡åˆ—è¡¨

| äº‘å¯¹è±¡ | è·¯å¾„ | è¯´æ˜ |
|--------|------|------|
| user-center | uniCloud/cloudfunctions/user-center | ç”¨æˆ·ç›¸å…³ï¼ˆç™»å½•ã€æ³¨å†Œã€è®¤è¯ã€ä¿¡æ¯æ›´æ–°ï¼‰ |
| alumni | uniCloud/cloudfunctions/alumni | æ ¡å‹å½•ç›¸å…³ï¼ˆæŸ¥è¯¢ã€æœç´¢ã€ç»Ÿè®¡ï¼‰ |
| friend | uniCloud/cloudfunctions/friend | å¥½å‹ç›¸å…³ï¼ˆåç‰‡äº¤æ¢ã€å¥½å‹åˆ—è¡¨ã€å¥½å‹ç®¡ç†ï¼‰ |
| post | uniCloud/cloudfunctions/post | åŠ¨æ€ç›¸å…³ï¼ˆå‘å¸ƒã€åˆ—è¡¨ã€è¯¦æƒ…ã€äº’åŠ¨ï¼‰ |
| activity | uniCloud/cloudfunctions/activity | æ´»åŠ¨ç›¸å…³ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€æŠ¥åã€ç­¾åˆ°ï¼‰ |
| organization | uniCloud/cloudfunctions/organization | ç»„ç»‡ç›¸å…³ï¼ˆåˆ›å»ºã€åŠ å…¥ã€ç®¡ç†ï¼‰ |
| admin | uniCloud/cloudfunctions/admin | ç®¡ç†åå°ï¼ˆå®¡æ ¸ã€ç»Ÿè®¡ã€é…ç½®ï¼‰ |
| common | uniCloud/cloudfunctions/common | é€šç”¨åŠŸèƒ½ï¼ˆä¸Šä¼ ã€å­—å…¸æ•°æ®ç­‰ï¼‰ |

### 6.2 äº‘å¯¹è±¡è°ƒç”¨ç¤ºä¾‹

```javascript
// å‰ç«¯è°ƒç”¨äº‘å¯¹è±¡
const alumniObj = uniCloud.importObject('alumni')

// æœç´¢æ ¡å‹
const res = await alumniObj.search({
  enrollmentYear: 2010,
  industry: 'IT/äº’è”ç½‘',
  page: 1,
  pageSize: 20
})

// å‘é€åç‰‡è¯·æ±‚
const friendObj = uniCloud.importObject('friend')
await friendObj.sendCardRequest({
  toUserId: 'xxx',
  message: 'ä½ å¥½ï¼Œæˆ‘æ˜¯2010å±Šçš„å­¦é•¿'
})
```

### 6.3 æ‰¾æ ¡å‹äº‘å¯¹è±¡ï¼ˆalumniï¼‰

```javascript
// uniCloud/cloudfunctions/alumni/index.obj.js

module.exports = {
  _before: async function() {
    // ç»Ÿä¸€é‰´æƒï¼šæ ¡å‹è®¤è¯ç”¨æˆ·æ‰èƒ½æœç´¢
    this.userInfo = await this.getUniIdToken()
    if (!this.userInfo?.uid) {
      throw new Error('è¯·å…ˆç™»å½•')
    }
  },

  /**
   * å¤šæ¡ä»¶æœç´¢æ ¡å‹
   * @param {Object} params - æœç´¢å‚æ•°
   * @param {number} [params.enrollmentYear] - å…¥å­¦å¹´ä»½
   * @param {string} [params.industry] - è¡Œä¸š
   * @param {string[]} [params.interests] - å…´è¶£æ ‡ç­¾æ•°ç»„
   * @param {string} [params.city] - åŸå¸‚
   * @param {string} [params.college] - å­¦é™¢
   * @param {string} [params.keyword] - å…³é”®è¯ï¼ˆå§“å/å…¬å¸ï¼‰
   * @param {string} [params.lastId] - ä¸Šä¸€é¡µæœ€åä¸€æ¡IDï¼ˆæ¸¸æ ‡åˆ†é¡µï¼‰
   * @param {number} [params.pageSize=20] - æ¯é¡µæ•°é‡ï¼ˆæœ€å¤§50ï¼‰
   * @returns {Promise<{list: Array, hasMore: boolean, lastId: string}>}
   */
  async search(params) {
    // å®ç°è§æ€§èƒ½ä¼˜åŒ–ç« èŠ‚
  },

  /**
   * è·å–æ ¡å‹åç‰‡è¯¦æƒ…
   * @param {string} userId - ç”¨æˆ·ID
   * @returns {Promise<Object>} æ ¡å‹è¯¦ç»†ä¿¡æ¯
   */
  async getProfile(userId) { },

  /**
   * è·å–ç­›é€‰é€‰é¡¹ï¼ˆå¸¦ç¼“å­˜ï¼‰
   * @param {string} type - ç±»å‹: year/industry/interest/city/college
   * @returns {Promise<Array<{label: string, value: string, count: number}>>}
   */
  async getFilterOptions(type) { },

  /**
   * è·å–æ¨èæ ¡å‹ï¼ˆåŒå±Š/åŒåŸ/åŒè¡Œä¸šï¼‰
   * @param {number} [limit=10] - æ•°é‡é™åˆ¶
   * @returns {Promise<Array>} æ¨èæ ¡å‹åˆ—è¡¨
   */
  async getRecommended(limit = 10) { }
}
```

### 6.4 å¥½å‹äº‘å¯¹è±¡ï¼ˆfriendï¼‰

```javascript
// uniCloud/cloudfunctions/friend/index.obj.js

module.exports = {
  _before: async function() {
    this.userInfo = await this.getUniIdToken()
    if (!this.userInfo?.uid) {
      throw new Error('è¯·å…ˆç™»å½•')
    }
  },

  /**
   * å‘é€åç‰‡äº¤æ¢è¯·æ±‚
   * @param {Object} params
   * @param {string} params.toUserId - ç›®æ ‡ç”¨æˆ·ID
   * @param {string} [params.message] - è¯·æ±‚ç•™è¨€
   * @returns {Promise<{requestId: string}>}
   */
  async sendCardRequest(params) {
    // 1. æ£€æŸ¥æ˜¯å¦å·²æ˜¯å¥½å‹ â†’ å·²æ˜¯å¥½å‹åˆ™è¿”å›é”™è¯¯
    // 2. æ£€æŸ¥æ˜¯å¦æœ‰å¾…å¤„ç†çš„è¯·æ±‚ â†’ æœ‰åˆ™è¿”å›é”™è¯¯
    // 3. æ£€æŸ¥å¯¹æ–¹æ˜¯å¦ä¹Ÿå‘é€äº†è¯·æ±‚ â†’ å¦‚æœæœ‰ï¼Œç›´æ¥äº’ç›¸æ·»åŠ ä¸ºå¥½å‹
    // 4. åˆ›å»ºåç‰‡äº¤æ¢è¯·æ±‚è®°å½•
    // 5. å‘é€é€šçŸ¥ç»™å¯¹æ–¹ï¼ˆç³»ç»Ÿæ¶ˆæ¯/æ¨é€ï¼‰
  },

  /**
   * è·å–åç‰‡è¯·æ±‚åˆ—è¡¨
   * @param {Object} params
   * @param {'received'|'sent'} params.type - received-æ”¶åˆ°çš„ / sent-å‘å‡ºçš„
   * @param {number} [params.status] - çŠ¶æ€ç­›é€‰
   * @param {number} [params.page=1] - é¡µç 
   * @param {number} [params.pageSize=20] - æ¯é¡µæ•°é‡
   * @returns {Promise<{list: Array, total: number, hasMore: boolean}>}
   */
  async getCardRequests(params) { },

  /**
   * å¤„ç†åç‰‡è¯·æ±‚
   * @param {Object} params
   * @param {string} params.requestId - è¯·æ±‚ID
   * @param {'accept'|'reject'} params.action - æ“ä½œç±»å‹
   * @param {string} [params.rejectReason] - æ‹’ç»åŸå› 
   * @returns {Promise<void>}
   */
  async handleCardRequest(params) {
    // action = accept:
    // 1. æ›´æ–°è¯·æ±‚çŠ¶æ€ä¸ºå·²åŒæ„
    // 2. åˆ›å»ºå¥½å‹å…³ç³»è®°å½•
    // 3. å‘é€é€šçŸ¥ç»™è¯·æ±‚æ–¹
    // 4. åˆ›å»º uni-im ä¼šè¯ï¼ˆå¯é€‰ï¼‰

    // action = reject:
    // 1. æ›´æ–°è¯·æ±‚çŠ¶æ€ä¸ºå·²æ‹’ç»
    // 2. è®°å½•æ‹’ç»åŸå› 
    // 3. å‘é€é€šçŸ¥ç»™è¯·æ±‚æ–¹
  },

  /**
   * è·å–å¥½å‹åˆ—è¡¨
   * @param {Object} [params]
   * @param {string} [params.keyword] - æœç´¢å…³é”®è¯
   * @param {number} [params.page=1] - é¡µç 
   * @param {number} [params.pageSize=20] - æ¯é¡µæ•°é‡
   * @returns {Promise<{list: Array, total: number, hasMore: boolean}>}
   */
  async getFriendList(params) { },

  /**
   * è·å–å¥½å‹è¯¦æƒ…ï¼ˆå®Œæ•´ä¿¡æ¯ï¼‰
   * @param {string} friendUserId - å¥½å‹ç”¨æˆ·ID
   * @returns {Promise<Object>} å¥½å‹å®Œæ•´ä¿¡æ¯
   */
  async getFriendDetail(friendUserId) { },

  /**
   * æ›´æ–°å¥½å‹å¤‡æ³¨
   * @param {string} friendUserId - å¥½å‹ç”¨æˆ·ID
   * @param {string} remark - å¤‡æ³¨å
   * @returns {Promise<void>}
   */
  async updateRemark(friendUserId, remark) { },

  /**
   * åˆ é™¤å¥½å‹
   * @param {string} friendUserId - å¥½å‹ç”¨æˆ·ID
   * @returns {Promise<void>}
   */
  async deleteFriend(friendUserId) { },

  /**
   * æ‰¹é‡æ£€æŸ¥å¥½å‹å…³ç³»
   * @param {string[]} userIds - ç”¨æˆ·IDæ•°ç»„
   * @returns {Promise<Object>} { [userId]: { isFriend: boolean, hasPendingRequest: boolean } }
   */
  async checkFriendships(userIds) { }
}
```

---

## ä¸ƒã€å¾…è®¨è®ºäº‹é¡¹

### 7.1 åŠŸèƒ½ä¼˜å…ˆçº§ï¼ˆå·²è°ƒæ•´ï¼‰

åŸºäº uni-starter å·²æœ‰åŠŸèƒ½ï¼Œé‡æ–°åˆ’åˆ†å¼€å‘ä¼˜å…ˆçº§ï¼š

**å·²å®Œæˆï¼ˆuni-starter æä¾›ï¼‰**ï¼š
| åŠŸèƒ½ | æ¥æº | å¤‡æ³¨ |
|------|------|------|
| ç”¨æˆ·æ³¨å†Œ/ç™»å½• | uni-id-pages | å¾®ä¿¡ã€æ‰‹æœºå·ã€å¯†ç ç™»å½• |
| ä¸ªäººä¿¡æ¯ç®¡ç† | uni-id-pages | å¤´åƒã€æ˜µç§°ã€åŸºç¡€ä¿¡æ¯ |
| è´¦å·å®‰å…¨ | uni-id-pages | æ”¹å¯†ã€ç»‘å®šã€æ³¨é”€ |
| åŠ¨æ€/æ–‡ç« ç³»ç»Ÿ | uni-starter | åˆ—è¡¨ã€è¯¦æƒ…ã€è¯„è®º |
| çŸ­ä¿¡/æ¨é€ | uni-starter | éªŒè¯ç ã€æ¶ˆæ¯æ¨é€ |

**éœ€è¦å¼€å‘**ï¼š
| ä¼˜å…ˆçº§ | åŠŸèƒ½æ¨¡å— | è¯´æ˜ | å·¥ä½œé‡ |
|:------:|----------|------|:------:|
| **P0** | æ ¡å‹è®¤è¯ | æ‰©å±• uni-id-users è¡¨ï¼Œå¢åŠ æ•™è‚²ç»å†å­—æ®µ | ä¸­ |
| **P0** | æ ¡å‹æ¨èè®¤è¯ | æ–°å¢æ¨èè¡¨ï¼Œå®ç°æ¨èè®¤è¯é€»è¾‘ | ä¸­ |
| **P0** | æ‰¾æ ¡å‹ | å¤šæ¡ä»¶ç­›é€‰æœç´¢ï¼ˆå¹´çº§ã€è¡Œä¸šã€å…´è¶£ã€åŸå¸‚ï¼‰ | ä¸­ |
| **P0** | åç‰‡äº¤æ¢ | å‘é€/æ¥æ”¶åç‰‡è¯·æ±‚ï¼Œå»ºç«‹å¥½å‹å…³ç³» | ä¸­ |
| **P0** | å¥½å‹ç³»ç»Ÿ | å¥½å‹åˆ—è¡¨ã€å¥½å‹è¯¦æƒ…ã€å¤‡æ³¨ç®¡ç† | ä¸­ |
| **P0** | éšç§è®¾ç½® | æ§åˆ¶ä¿¡æ¯å¯è§èŒƒå›´ | å° |
| **P1** | å¥½å‹èŠå¤© | é›†æˆ uni-imï¼Œå¥½å‹é—´ç§èŠ | ä¸­ |
| **P1** | æ´»åŠ¨æ¨¡å— | æ´»åŠ¨å‘å¸ƒã€æŠ¥åã€ç­¾åˆ° | å¤§ |
| **P1** | ç»„ç»‡æ¨¡å— | åŒºåŸŸ/è¡Œä¸š/å…´è¶£æ ¡å‹ä¼šã€ç»„ç»‡ä¸»é¡µ | å¤§ |
| **P1** | ç®¡ç†åå° | é›†æˆ uni-adminï¼Œæ ¡å‹å®¡æ ¸ã€ç»„ç»‡å®¡æ ¸ç­‰ | å¤§ |
| **P2** | æ ¡å‹åœ°å›¾ | åœ°å›¾å±•ç¤ºæ ¡å‹åˆ†å¸ƒ | ä¸­ |
| **P2** | å­¦æ ¡é…ç½® | Logoã€é™¢ç³»ã€è®¤è¯è§„åˆ™ç­‰ | å° |

### 7.2 å¼€æ”¾è®¨è®º

1. **å¤šå­¦æ ¡æ”¯æŒ**ï¼š~~æ˜¯å¦éœ€è¦æ”¯æŒä¸€å¥—ç³»ç»Ÿéƒ¨ç½²å¤šä¸ªå­¦æ ¡ï¼Ÿè¿˜æ˜¯æ¯ä¸ªå­¦æ ¡ç‹¬ç«‹éƒ¨ç½²ï¼Ÿ~~
   > âœ… å·²ç¡®è®¤ï¼š**æ¯æ ¡ç‹¬ç«‹éƒ¨ç½²**ï¼Œæ¯ä¸ªå­¦æ ¡æ‹¥æœ‰ç‹¬ç«‹çš„ uniCloud æœåŠ¡ç©ºé—´

2. **è®¤è¯æ–¹å¼**ï¼š~~é™¤äº†äººå·¥å®¡æ ¸ï¼Œæ˜¯å¦éœ€è¦å…¶ä»–è®¤è¯æ–¹å¼ï¼Ÿ~~
   > âœ… å·²ç¡®è®¤ï¼š**äººå·¥å®¡æ ¸ + æ ¡å‹æ¨è** åŒé€šé“
   > - é€šé“ä¸€ï¼šç®¡ç†å‘˜äººå·¥å®¡æ ¸
   > - é€šé“äºŒï¼šå·²è®¤è¯æ ¡å‹æ¨èï¼Œ**ç´¯è®¡è¶…è¿‡3äººæ¨èè‡ªåŠ¨é€šè¿‡**

3. **ç¤¾äº¤æ·±åº¦**ï¼š~~æ˜¯å¦éœ€è¦å¥½å‹å…³ç³»ï¼Ÿæ˜¯å¦éœ€è¦ç¾¤èŠåŠŸèƒ½ï¼Ÿ~~
   > âœ… å·²ç¡®è®¤ï¼š**å¥½å‹å…³ç³» + ç¾¤èŠåŠŸèƒ½**ï¼ŒåŸºäº **uni-im** å®ç°
   > - å‚è€ƒæ–‡æ¡£ï¼šhttps://doc.dcloud.net.cn/uniCloud/uni-im.html
   > - å•èŠï¼šæ ¡å‹é—´ç§ä¿¡
   > - ç¾¤èŠï¼šç­çº§ç¾¤ã€æ´»åŠ¨ç¾¤ã€å…´è¶£ç¾¤ç­‰
   > - æ¶ˆæ¯ç±»å‹ï¼šæ–‡æœ¬ã€å›¾ç‰‡ã€è¯­éŸ³ç­‰

4. **ç®¡ç†åå°**ï¼š~~å°ç¨‹åºå†…åµŒç®¡ç†é¡µé¢ï¼Ÿç‹¬ç«‹H5ç®¡ç†åå°ï¼Ÿ~~
   > âœ… å·²ç¡®è®¤ï¼šåŸºäº **uni-admin** å®˜æ–¹åå°æ¡†æ¶
   > - å‚è€ƒæ–‡æ¡£ï¼šhttps://doc.dcloud.net.cn/uniCloud/admin.html
   > - PC/H5 ç®¡ç†åå°ï¼ŒåŠŸèƒ½å®Œæ•´
   > - ä¸ uniCloud æ·±åº¦é›†æˆï¼Œå¼€å‘æ•ˆç‡é«˜

5. **å…¶ä»–åŠŸèƒ½å»ºè®®**ï¼š~~æ ¡å‹ä¼ä¸šé»„é¡µã€æ±‚èŒ/æ‹›è˜æ¿å—ã€æ ¡å‹é—®ç­”ã€ç­çº§ç›¸å†Œ~~
   > âœ… å·²ç¡®è®¤ï¼š**MVP é˜¶æ®µæš‚ä¸å®ç°**ï¼Œä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½
   > - åç»­ç‰ˆæœ¬å¯è€ƒè™‘ï¼šä¼ä¸šé»„é¡µã€æ‹›è˜ã€é—®ç­”ã€ç›¸å†Œã€æèµ ç­‰

---

## å…«ã€æ€§èƒ½ä¼˜åŒ–è®¾è®¡

> **æ•°æ®è§„æ¨¡é¢„ä¼°**ï¼šå¤§å­¦æ¯å¹´ä¸Šä¸‡äººï¼Œç™¾å¹´æ ¡åº†ç´¯è®¡å¯èƒ½è¾¾ **50ä¸‡+** æ ¡å‹ï¼Œéœ€è¦é’ˆå¯¹å¤§è§„æ¨¡æ•°æ®è¿›è¡Œä¼˜åŒ–è®¾è®¡ã€‚

### 8.1 æ•°æ®åº“ç´¢å¼•è®¾è®¡

#### uni-id-users è¡¨ç´¢å¼•

```javascript
// å¿…éœ€ç´¢å¼•ï¼ˆæ”¯æŒæ‰¾æ ¡å‹å¤šæ¡ä»¶æœç´¢ï¼‰
{
  // å•å­—æ®µç´¢å¼•
  "alumniStatus": 1,              // æ ¡å‹è®¤è¯çŠ¶æ€ç­›é€‰
  "industry": 1,                  // è¡Œä¸šç­›é€‰
  "workCity": 1,                  // åŸå¸‚ç­›é€‰
  "workProvince": 1,              // çœä»½ç­›é€‰

  // å¤åˆç´¢å¼•ï¼ˆæŒ‰æŸ¥è¯¢é¢‘ç‡è®¾è®¡ï¼‰
  "idx_alumni_search": {          // ä¸»æœç´¢ç´¢å¼•
    "alumniStatus": 1,
    "educations.enrollmentYear": 1,
    "industry": 1,
    "workCity": 1
  },
  "idx_college_major": {          // é™¢ç³»ä¸“ä¸šç­›é€‰
    "alumniStatus": 1,
    "educations.college": 1,
    "educations.major": 1
  },
  "idx_tags": {                   // å…´è¶£æ ‡ç­¾ç­›é€‰ï¼ˆæ•°ç»„ç´¢å¼•ï¼‰
    "alumniStatus": 1,
    "tags": 1
  }
}
```

#### alumni-friends è¡¨ç´¢å¼•

```javascript
{
  // è”åˆå”¯ä¸€ç´¢å¼•
  "idx_friend_pair": {
    "userIdA": 1,
    "userIdB": 1,
    "unique": true
  },
  // æŸ¥è¯¢å¥½å‹åˆ—è¡¨
  "idx_userA": { "userIdA": 1, "status": 1 },
  "idx_userB": { "userIdB": 1, "status": 1 }
}
```

#### alumni-card-requests è¡¨ç´¢å¼•

```javascript
{
  "idx_to_user": { "toUserId": 1, "status": 1, "createTime": -1 },
  "idx_from_user": { "fromUserId": 1, "status": 1, "createTime": -1 },
  "idx_expire": { "status": 1, "expireTime": 1 }  // å®šæ—¶æ¸…ç†è¿‡æœŸè¯·æ±‚
}
```

### 8.2 æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥

#### 8.2.1 åˆ†é¡µä¼˜åŒ–

```javascript
// âŒ é”™è¯¯ï¼šå¤§æ•°æ®é‡ä¸‹ skip æ€§èƒ½å·®
db.collection('uni-id-users')
  .skip((page - 1) * pageSize)  // skip 10ä¸‡æ¡æ•°æ®ä¼šå¾ˆæ…¢
  .limit(pageSize)

// âœ… æ­£ç¡®ï¼šä½¿ç”¨æ¸¸æ ‡åˆ†é¡µï¼ˆåŸºäº _id æˆ–æ—¶é—´æˆ³ï¼‰
db.collection('uni-id-users')
  .where({
    alumniStatus: 1,
    _id: dbCmd.gt(lastId)  // åŸºäºä¸Šä¸€é¡µæœ€åä¸€æ¡çš„ _id
  })
  .orderBy('_id', 'asc')
  .limit(pageSize)
```

#### 8.2.2 æ¡ä»¶æŸ¥è¯¢ä¼˜åŒ–

```javascript
// æœç´¢æ ¡å‹ä¼˜åŒ–å®ç°
async search(params) {
  const { enrollmentYear, industry, interests, city, keyword, lastId, pageSize = 20 } = params

  // æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼ˆä»…æ·»åŠ éç©ºæ¡ä»¶ï¼‰
  const where = { alumniStatus: 1 }

  if (enrollmentYear) {
    where['educations.enrollmentYear'] = enrollmentYear
  }
  if (industry) {
    where.industry = industry
  }
  if (city) {
    where.workCity = city
  }
  if (interests?.length) {
    where.tags = dbCmd.in(interests)  // æ•°ç»„åŒ…å«æŸ¥è¯¢
  }
  if (keyword) {
    // å…³é”®è¯æœç´¢ï¼ˆå§“å/å…¬å¸ï¼‰- ä½¿ç”¨æ­£åˆ™ä¼šå½±å“æ€§èƒ½ï¼Œå»ºè®®é™åˆ¶æœ€å°é•¿åº¦
    where.or = [
      { realName: new RegExp(keyword) },
      { company: new RegExp(keyword) }
    ]
  }

  // æ¸¸æ ‡åˆ†é¡µ
  if (lastId) {
    where._id = dbCmd.gt(lastId)
  }

  // åªè¿”å›åˆ—è¡¨éœ€è¦çš„å­—æ®µï¼ˆå‡å°‘æ•°æ®ä¼ è¾“ï¼‰
  const res = await db.collection('uni-id-users')
    .where(where)
    .field({
      _id: true,
      avatar: true,
      realName: true,
      educations: true,
      industry: true,
      company: true,
      position: true,
      workCity: true,
      tags: true
    })
    .orderBy('_id', 'asc')
    .limit(Math.min(pageSize, 50))  // é™åˆ¶æœ€å¤§50æ¡
    .get()

  return res.data
}
```

### 8.3 ç¼“å­˜ç­–ç•¥

#### 8.3.1 Redis ç¼“å­˜ï¼ˆæ¨èï¼‰

```javascript
// ä½¿ç”¨ uniCloud Redis æ‰©å±•
const redis = uniCloud.redis()

// ç­›é€‰é€‰é¡¹ç¼“å­˜ï¼ˆå˜åŒ–å°‘ï¼Œç¼“å­˜æ—¶é—´é•¿ï¼‰
async getFilterOptions(type) {
  const cacheKey = `filter_options:${type}`

  // å°è¯•ä»ç¼“å­˜è·å–
  let cached = await redis.get(cacheKey)
  if (cached) {
    return JSON.parse(cached)
  }

  // ä»æ•°æ®åº“èšåˆæŸ¥è¯¢
  let options
  switch (type) {
    case 'year':
      options = await this.aggregateYears()
      break
    case 'industry':
      options = await this.aggregateIndustries()
      break
    case 'city':
      options = await this.aggregateCities()
      break
  }

  // å†™å…¥ç¼“å­˜ï¼Œ1å°æ—¶è¿‡æœŸ
  await redis.set(cacheKey, JSON.stringify(options), 'EX', 3600)
  return options
}

// å¥½å‹å…³ç³»ç¼“å­˜ï¼ˆæŸ¥è¯¢é¢‘ç¹ï¼‰
async checkFriendships(currentUserId, targetUserIds) {
  const cacheKey = `friends:${currentUserId}`

  // è·å–ç”¨æˆ·çš„å¥½å‹IDé›†åˆ
  let friendIds = await redis.smembers(cacheKey)

  if (!friendIds.length) {
    // ç¼“å­˜æœªå‘½ä¸­ï¼Œä»æ•°æ®åº“åŠ è½½
    const friends = await db.collection('alumni-friends')
      .where(dbCmd.or([
        { userIdA: currentUserId, status: 1 },
        { userIdB: currentUserId, status: 1 }
      ]))
      .get()

    friendIds = friends.data.map(f =>
      f.userIdA === currentUserId ? f.userIdB : f.userIdA
    )

    // å†™å…¥ Redis Setï¼Œ24å°æ—¶è¿‡æœŸ
    if (friendIds.length) {
      await redis.sadd(cacheKey, ...friendIds)
      await redis.expire(cacheKey, 86400)
    }
  }

  // å¿«é€Ÿåˆ¤æ–­æ˜¯å¦æ˜¯å¥½å‹
  const result = {}
  for (const uid of targetUserIds) {
    result[uid] = {
      isFriend: friendIds.includes(uid),
      hasPendingRequest: false  // å¾…å¤„ç†è¯·æ±‚å•ç‹¬æŸ¥è¯¢
    }
  }
  return result
}
```

#### 8.3.2 æœ¬åœ°ç¼“å­˜ï¼ˆæ—  Redis æ—¶ï¼‰

```javascript
// ä½¿ç”¨äº‘å‡½æ•°å†…å­˜ç¼“å­˜ï¼ˆå•å®ä¾‹æœ‰æ•ˆï¼‰
const LRU = require('lru-cache')
const cache = new LRU({
  max: 1000,           // æœ€å¤šç¼“å­˜1000ä¸ªæ¡ç›®
  maxAge: 1000 * 60 * 5 // 5åˆ†é’Ÿè¿‡æœŸ
})

// ç­›é€‰é€‰é¡¹ç¼“å­˜
async getFilterOptions(type) {
  const cacheKey = `filter:${type}`
  if (cache.has(cacheKey)) {
    return cache.get(cacheKey)
  }

  const options = await this.queryFilterOptions(type)
  cache.set(cacheKey, options)
  return options
}
```

### 8.4 ç»Ÿè®¡æ•°æ®ä¼˜åŒ–

#### 8.4.1 é¢„èšåˆç»Ÿè®¡è¡¨

```javascript
// alumni-statistics - ç»Ÿè®¡æ•°æ®è¡¨ï¼ˆå®šæ—¶ä»»åŠ¡æ¯å°æ—¶æ›´æ–°ï¼‰
{
  _id: "stats_summary",
  totalAlumni: 150000,          // æ€»æ ¡å‹æ•°
  byYear: {                     // æŒ‰å¹´ä»½ç»Ÿè®¡
    "2020": 12000,
    "2019": 11500,
    // ...
  },
  byIndustry: {                 // æŒ‰è¡Œä¸šç»Ÿè®¡
    "IT/äº’è”ç½‘": 35000,
    "é‡‘è": 28000,
    // ...
  },
  byCity: {                     // æŒ‰åŸå¸‚ç»Ÿè®¡
    "åŒ—äº¬": 25000,
    "ä¸Šæµ·": 22000,
    "æ·±åœ³": 18000,
    // ...
  },
  byCollege: {                  // æŒ‰å­¦é™¢ç»Ÿè®¡
    "è®¡ç®—æœºå­¦é™¢": 15000,
    "å•†å­¦é™¢": 12000,
    // ...
  },
  updateTime: "2026-01-13T10:00:00Z"
}
```

#### 8.4.2 å®šæ—¶èšåˆä»»åŠ¡

```javascript
// å®šæ—¶äº‘å‡½æ•°ï¼šæ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡
module.exports = async function() {
  const db = uniCloud.database()
  const $ = db.command.aggregate

  // èšåˆç»Ÿè®¡å„ç»´åº¦æ•°æ®
  const [byYear, byIndustry, byCity] = await Promise.all([
    // æŒ‰å¹´ä»½ç»Ÿè®¡
    db.collection('uni-id-users')
      .aggregate()
      .match({ alumniStatus: 1 })
      .unwind('$educations')
      .group({
        _id: '$educations.enrollmentYear',
        count: $.sum(1)
      })
      .end(),

    // æŒ‰è¡Œä¸šç»Ÿè®¡
    db.collection('uni-id-users')
      .aggregate()
      .match({ alumniStatus: 1, industry: $.neq(null) })
      .group({
        _id: '$industry',
        count: $.sum(1)
      })
      .end(),

    // æŒ‰åŸå¸‚ç»Ÿè®¡
    db.collection('uni-id-users')
      .aggregate()
      .match({ alumniStatus: 1, workCity: $.neq(null) })
      .group({
        _id: '$workCity',
        count: $.sum(1)
      })
      .end()
  ])

  // æ›´æ–°ç»Ÿè®¡è¡¨
  await db.collection('alumni-statistics').doc('stats_summary').set({
    totalAlumni: await db.collection('uni-id-users').where({ alumniStatus: 1 }).count(),
    byYear: Object.fromEntries(byYear.data.map(i => [i._id, i.count])),
    byIndustry: Object.fromEntries(byIndustry.data.map(i => [i._id, i.count])),
    byCity: Object.fromEntries(byCity.data.map(i => [i._id, i.count])),
    updateTime: new Date()
  })
}
```

### 8.5 å…¶ä»–ä¼˜åŒ–å»ºè®®

| ä¼˜åŒ–é¡¹ | è¯´æ˜ | å®æ–½é˜¶æ®µ |
|--------|------|:--------:|
| **å­—æ®µè£å‰ª** | åˆ—è¡¨æŸ¥è¯¢åªè¿”å›å¿…è¦å­—æ®µï¼Œè¯¦æƒ…é¡µå†è·å–å®Œæ•´æ•°æ® | MVP |
| **åˆ†é¡µé™åˆ¶** | å•æ¬¡æŸ¥è¯¢æœ€å¤§50æ¡ï¼Œæ€»ç¿»é¡µæ·±åº¦é™åˆ¶åœ¨100é¡µå†… | MVP |
| **å…³é”®è¯é•¿åº¦** | æœç´¢å…³é”®è¯æœ€å°‘2ä¸ªå­—ç¬¦ï¼Œé¿å…å…¨è¡¨æ‰«æ | MVP |
| **è¯·æ±‚é˜²æŠ–** | å‰ç«¯æœç´¢è¾“å…¥é˜²æŠ–300msï¼Œå‡å°‘æ— æ•ˆè¯·æ±‚ | MVP |
| **å†·çƒ­åˆ†ç¦»** | è¶…è¿‡10å¹´æœªæ´»è·ƒçš„æ ¡å‹æ•°æ®å½’æ¡£åˆ°å†å²è¡¨ | V2.0 |
| **è¯»å†™åˆ†ç¦»** | æœç´¢èµ°åªè¯»å‰¯æœ¬ï¼Œå†™å…¥èµ°ä¸»åº“ | V2.0 |
| **å…¨æ–‡æœç´¢** | æ¥å…¥ Elasticsearch æ”¯æŒå¤æ‚æœç´¢åœºæ™¯ | V2.0 |

---

## ä¹ã€éƒ¨ç½²æŒ‡å—

> **ç›®æ ‡**ï¼šè®©å„é«˜æ ¡èƒ½å¤Ÿ**å¼€ç®±å³ç”¨**ï¼Œå¿«é€Ÿéƒ¨ç½²è‡ªå·±çš„æ ¡å‹ä¼šå°ç¨‹åºã€‚

### 9.1 éƒ¨ç½²å‰å‡†å¤‡

#### 9.1.1 è´¦å·å‡†å¤‡

| è´¦å· | ç”¨é€” | è·å–æ–¹å¼ |
|------|------|----------|
| DCloud å¼€å‘è€…è´¦å· | uniCloud æœåŠ¡ç©ºé—´ | https://dev.dcloud.net.cn |
| å¾®ä¿¡å°ç¨‹åºè´¦å· | å‘å¸ƒå¾®ä¿¡å°ç¨‹åº | https://mp.weixin.qq.com |
| é˜¿é‡Œäº‘/è…¾è®¯äº‘è´¦å· | uniCloud æœåŠ¡ç©ºé—´ï¼ˆäºŒé€‰ä¸€ï¼‰ | å®˜ç½‘æ³¨å†Œ |

#### 9.1.2 ç¯å¢ƒè¦æ±‚

| å·¥å…· | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|----------|------|
| HBuilderX | 4.0+ | å®˜æ–¹ IDEï¼Œå¿…é¡» |
| Node.js | 18+ | æœ¬åœ°å¼€å‘ |
| å¾®ä¿¡å¼€å‘è€…å·¥å…· | æœ€æ–°ç‰ˆ | å°ç¨‹åºè°ƒè¯• |

### 9.2 å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     éƒ¨ç½²æµç¨‹ï¼ˆçº¦30åˆ†é’Ÿï¼‰                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ä¸‹è½½é¡¹ç›® â†’ 2. åˆ›å»ºæœåŠ¡ç©ºé—´ â†’ 3. é…ç½®å­¦æ ¡ä¿¡æ¯            â”‚
â”‚       â†“              â†“                â†“                     â”‚
â”‚  4. åˆå§‹åŒ–æ•°æ®åº“ â†’ 5. ä¸Šä¼ äº‘å‡½æ•° â†’ 6. å‘å¸ƒå°ç¨‹åº            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ­¥éª¤ 1ï¼šä¸‹è½½é¡¹ç›®

```bash
git clone https://github.com/xxx/alumnet.git
cd alumnet
```

#### æ­¥éª¤ 2ï¼šåˆ›å»º uniCloud æœåŠ¡ç©ºé—´

1. æ‰“å¼€ HBuilderXï¼Œå¯¼å…¥é¡¹ç›®
2. å³é”® `uniCloud` ç›®å½• â†’ å…³è”äº‘æœåŠ¡ç©ºé—´
3. é€‰æ‹©"æ–°å»ºæœåŠ¡ç©ºé—´"ï¼ˆæ¨èé˜¿é‡Œäº‘ï¼Œå…è´¹é¢åº¦æ›´å¤§ï¼‰
4. ç­‰å¾…æœåŠ¡ç©ºé—´åˆ›å»ºå®Œæˆï¼ˆçº¦1-2åˆ†é’Ÿï¼‰

#### æ­¥éª¤ 3ï¼šé…ç½®å­¦æ ¡ä¿¡æ¯

ç¼–è¾‘ `config/school.config.js`ï¼š

```javascript
// config/school.config.js
module.exports = {
  // ========== åŸºç¡€ä¿¡æ¯ï¼ˆå¿…å¡«ï¼‰ ==========
  name: 'æ¸…åå¤§å­¦',                    // å­¦æ ¡åç§°
  shortName: 'æ¸…å',                   // ç®€ç§°
  type: 'university',                  // ç±»å‹: university/highschool/middleschool
  logo: '/static/school-logo.png',     // å­¦æ ¡Logoè·¯å¾„

  // ========== å°ç¨‹åºä¿¡æ¯ï¼ˆå¿…å¡«ï¼‰ ==========
  appName: 'æ¸…åæ ¡å‹ä¼š',               // å°ç¨‹åºåç§°
  appId: 'wx1234567890',              // å¾®ä¿¡å°ç¨‹åºAppID

  // ========== ä¸»é¢˜é…ç½®ï¼ˆå¯é€‰ï¼Œæœ‰é»˜è®¤å€¼ï¼‰ ==========
  theme: {
    primaryColor: '#660874',          // ä¸»è‰²è°ƒï¼ˆæ¸…åç´«ï¼‰
    primaryLight: '#8B2A9B',
    primaryDark: '#4A0654',
  },

  // ========== å“ç‰Œé…ç½®ï¼ˆå¯é€‰ï¼‰ ==========
  branding: {
    slogan: 'è‡ªå¼ºä¸æ¯ï¼Œåšå¾·è½½ç‰©',      // æ ¡è®­/æ ‡è¯­
    welcomeText: 'æ¬¢è¿å›å®¶ï¼Œæ¸…åäºº',   // æ¬¢è¿è¯­
    copyrightText: 'Â© æ¸…åå¤§å­¦æ ¡å‹ä¼š', // ç‰ˆæƒä¿¡æ¯
  },

  // ========== ç»„ç»‡ç»“æ„ï¼ˆæ ¹æ®å­¦æ ¡ç±»å‹é…ç½®ï¼‰ ==========

  // å¤§å­¦é…ç½®
  degrees: ['bachelor', 'master', 'doctor'],  // å­¦å†å±‚æ¬¡
  colleges: [
    {
      name: 'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»',
      majors: ['è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯', 'è½¯ä»¶å·¥ç¨‹', 'äººå·¥æ™ºèƒ½']
    },
    {
      name: 'ç»æµç®¡ç†å­¦é™¢',
      majors: ['å·¥å•†ç®¡ç†', 'é‡‘èå­¦', 'ä¼šè®¡å­¦']
    },
    // ... æ·»åŠ æ›´å¤šå­¦é™¢
  ],

  // ä¸­å­¦é…ç½®ï¼ˆé«˜ä¸­/åˆä¸­ä½¿ç”¨ï¼‰
  // grades: ['é«˜ä¸€', 'é«˜äºŒ', 'é«˜ä¸‰'],

  // ========== åŠŸèƒ½å¼€å…³ï¼ˆå¯é€‰ï¼‰ ==========
  features: {
    enableDonation: false,            // æ˜¯å¦å¯ç”¨æèµ æ¨¡å—
    enableMap: true,                  // æ˜¯å¦å¯ç”¨æ ¡å‹åœ°å›¾
    enableRecommendVerify: true,      // æ˜¯å¦å¯ç”¨æ¨èè®¤è¯
    recommendCount: 3,                // æ¨èè®¤è¯æ‰€éœ€äººæ•°
  },
}
```

#### æ­¥éª¤ 4ï¼šåˆå§‹åŒ–æ•°æ®åº“

1. å³é”® `uniCloud/database` ç›®å½• â†’ åˆå§‹åŒ–äº‘æ•°æ®åº“
2. ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºæ‰€æœ‰æ•°æ®è¡¨å’Œç´¢å¼•
3. è¿è¡Œåˆå§‹åŒ–è„šæœ¬æ’å…¥åŸºç¡€æ•°æ®ï¼š

```bash
# åœ¨ HBuilderX ä¸­è¿è¡Œ
å³é”® uniCloud/cloudfunctions/common â†’ ä¸Šä¼ å¹¶è¿è¡Œäº‘å‡½æ•°
é€‰æ‹© initDatabase æ–¹æ³•
```

åˆå§‹åŒ–å†…å®¹åŒ…æ‹¬ï¼š
- åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦å·
- æ’å…¥å­¦æ ¡é…ç½®æ•°æ®
- æ’å…¥è¡Œä¸šã€å…´è¶£ç­‰å­—å…¸æ•°æ®

#### æ­¥éª¤ 5ï¼šä¸Šä¼ äº‘å‡½æ•°

1. å³é”® `uniCloud/cloudfunctions` ç›®å½•
2. é€‰æ‹©"ä¸Šä¼ æ‰€æœ‰äº‘å‡½æ•°ã€å…¬å…±æ¨¡å—åŠ actions"
3. ç­‰å¾…ä¸Šä¼ å®Œæˆ

#### æ­¥éª¤ 6ï¼šå‘å¸ƒå°ç¨‹åº

1. è¿è¡Œ â†’ è¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨ â†’ å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆã€æµ‹è¯•
3. ä¸Šä¼ ä»£ç ï¼Œæäº¤å®¡æ ¸

### 9.3 é…ç½®é¡¹è¯¦è§£

#### 9.3.1 å­¦æ ¡ç±»å‹å·®å¼‚

| é…ç½®é¡¹ | å¤§å­¦ | é«˜ä¸­ | åˆä¸­ |
|--------|:----:|:----:|:----:|
| degrees | âœ“ | - | - |
| colleges + majors | âœ“ | - | - |
| grades | - | âœ“ | âœ“ |
| å­¦å·å­—æ®µ | å¯é€‰ | å¯é€‰ | å¯é€‰ |
| é™¢ç³»ç­›é€‰ | âœ“ | - | - |
| å¹´çº§ç­›é€‰ | âœ“ | âœ“ | âœ“ |

#### 9.3.2 åŠŸèƒ½æ¨¡å—å¼€å…³

```javascript
features: {
  // æ ¸å¿ƒåŠŸèƒ½ï¼ˆä¸å¯å…³é—­ï¼‰
  // - æ ¡å‹è®¤è¯ã€æ ¡å‹å½•ã€å¥½å‹ç³»ç»Ÿ

  // å¯é€‰åŠŸèƒ½
  enableDonation: false,      // æèµ æ¨¡å—ï¼ˆéœ€è¦æ”¯ä»˜èµ„è´¨ï¼‰
  enableMap: true,            // æ ¡å‹åœ°å›¾ï¼ˆéœ€è¦åœ°å›¾API Keyï¼‰
  enableActivity: true,       // æ´»åŠ¨æ¨¡å—
  enableOrganization: true,   // ç»„ç»‡æ¨¡å—
  enableRecommendVerify: true,// æ¨èè®¤è¯

  // è®¤è¯é…ç½®
  recommendCount: 3,          // æ¨èè‡ªåŠ¨é€šè¿‡äººæ•°
  requireProof: false,        // æ˜¯å¦å¿…é¡»ä¸Šä¼ è¯æ˜ææ–™
}
```

### 9.4 æ•°æ®åˆå§‹åŒ–

#### 9.4.1 åˆå§‹åŒ–è„šæœ¬

```javascript
// uniCloud/cloudfunctions/common/initDatabase.js

/**
 * åˆå§‹åŒ–æ•°æ®åº“
 * é¦–æ¬¡éƒ¨ç½²æ—¶è¿è¡Œä¸€æ¬¡
 */
async function initDatabase() {
  const db = uniCloud.database()
  const schoolConfig = require('../../../config/school.config.js')

  // 1. åˆå§‹åŒ–å­¦æ ¡é…ç½®
  await db.collection('alumni-school-config').add({
    _id: 'school_config',
    ...schoolConfig,
    createTime: Date.now(),
    updateTime: Date.now()
  })

  // 2. åˆå§‹åŒ–è¡Œä¸šå­—å…¸
  await db.collection('alumni-dictionaries').add({
    _id: 'dict_industries',
    type: 'industry',
    items: [
      { value: 'it', label: 'IT/äº’è”ç½‘', sort: 1 },
      { value: 'finance', label: 'é‡‘è/æŠ•èµ„', sort: 2 },
      { value: 'education', label: 'æ•™è‚²/åŸ¹è®­', sort: 3 },
      { value: 'medical', label: 'åŒ»ç–—/å¥åº·', sort: 4 },
      { value: 'government', label: 'æ”¿åºœ/äº‹ä¸šå•ä½', sort: 5 },
      { value: 'manufacturing', label: 'åˆ¶é€ ä¸š', sort: 6 },
      { value: 'realestate', label: 'æˆ¿åœ°äº§/å»ºç­‘', sort: 7 },
      { value: 'media', label: 'ä¼ åª’/å¹¿å‘Š', sort: 8 },
      { value: 'law', label: 'æ³•å¾‹/å’¨è¯¢', sort: 9 },
      { value: 'other', label: 'å…¶ä»–', sort: 99 },
    ]
  })

  // 3. åˆå§‹åŒ–å…´è¶£æ ‡ç­¾å­—å…¸
  await db.collection('alumni-dictionaries').add({
    _id: 'dict_interests',
    type: 'interest',
    items: [
      { value: 'basketball', label: 'ç¯®çƒ', sort: 1 },
      { value: 'football', label: 'è¶³çƒ', sort: 2 },
      { value: 'photography', label: 'æ‘„å½±', sort: 3 },
      { value: 'reading', label: 'é˜…è¯»', sort: 4 },
      { value: 'travel', label: 'æ—…è¡Œ', sort: 5 },
      { value: 'music', label: 'éŸ³ä¹', sort: 6 },
      { value: 'movie', label: 'ç”µå½±', sort: 7 },
      { value: 'fitness', label: 'å¥èº«', sort: 8 },
      { value: 'gaming', label: 'æ¸¸æˆ', sort: 9 },
      { value: 'cooking', label: 'çƒ¹é¥ª', sort: 10 },
    ]
  })

  // 4. åˆ›å»ºè¶…çº§ç®¡ç†å‘˜
  // æ³¨æ„ï¼šéœ€è¦å…ˆé€šè¿‡å°ç¨‹åºç™»å½•ä¸€æ¬¡ï¼Œè·å–ç”¨æˆ·IDåè®¾ç½®
  console.log('æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ')
  console.log('è¯·ç™»å½•å°ç¨‹åºåï¼Œåœ¨ç®¡ç†åå°è®¾ç½®è¶…çº§ç®¡ç†å‘˜')
}
```

#### 9.4.2 æ•°æ®å­—å…¸è¡¨

```javascript
// alumni-dictionaries - æ•°æ®å­—å…¸è¡¨
{
  _id: string,              // å­—å…¸IDï¼Œå¦‚ 'dict_industries'
  type: string,             // ç±»å‹: industry/interest/city/degree
  items: [
    {
      value: string,        // å€¼
      label: string,        // æ˜¾ç¤ºæ–‡æœ¬
      sort: number,         // æ’åº
      enabled: boolean,     // æ˜¯å¦å¯ç”¨ï¼ˆé»˜è®¤trueï¼‰
    }
  ],
  createTime: timestamp,
  updateTime: timestamp,
}
```

### 9.5 ç®¡ç†åå°

#### 9.5.1 åå°åŠŸèƒ½æ¨¡å—

```
uni-admin ç®¡ç†åå°
â”œâ”€â”€ é¦–é¡µä»ªè¡¨ç›˜
â”‚   â”œâ”€â”€ æ ¡å‹æ€»æ•°ã€ä»Šæ—¥æ–°å¢
â”‚   â”œâ”€â”€ å¾…å®¡æ ¸æ•°é‡
â”‚   â””â”€â”€ æ´»è·ƒåº¦è¶‹åŠ¿å›¾
â”œâ”€â”€ æ ¡å‹ç®¡ç†
â”‚   â”œâ”€â”€ æ ¡å‹åˆ—è¡¨ï¼ˆæœç´¢ã€ç­›é€‰ã€å¯¼å‡ºï¼‰
â”‚   â”œâ”€â”€ è®¤è¯å®¡æ ¸ï¼ˆé€šè¿‡/æ‹’ç»/æ‰¹é‡ï¼‰
â”‚   â””â”€â”€ æ ¡å‹è¯¦æƒ…ï¼ˆæŸ¥çœ‹/ç¼–è¾‘/ç¦ç”¨ï¼‰
â”œâ”€â”€ å†…å®¹ç®¡ç†
â”‚   â”œâ”€â”€ åŠ¨æ€ç®¡ç†ï¼ˆå®¡æ ¸/åˆ é™¤/ç½®é¡¶ï¼‰
â”‚   â”œâ”€â”€ æ–°é—»å…¬å‘Šï¼ˆå‘å¸ƒ/ç¼–è¾‘/åˆ é™¤ï¼‰
â”‚   â””â”€â”€ è½®æ’­å›¾ç®¡ç†
â”œâ”€â”€ æ´»åŠ¨ç®¡ç†
â”‚   â”œâ”€â”€ æ´»åŠ¨åˆ—è¡¨
â”‚   â”œâ”€â”€ æŠ¥åç®¡ç†ï¼ˆå®¡æ ¸/å¯¼å‡ºï¼‰
â”‚   â””â”€â”€ ç­¾åˆ°ç»Ÿè®¡
â”œâ”€â”€ ç»„ç»‡ç®¡ç†
â”‚   â”œâ”€â”€ ç»„ç»‡å®¡æ ¸
â”‚   â””â”€â”€ æˆå‘˜ç®¡ç†
â”œâ”€â”€ æ•°æ®ç»Ÿè®¡
â”‚   â”œâ”€â”€ æ ¡å‹åˆ†å¸ƒï¼ˆå¹´çº§/è¡Œä¸š/åŸå¸‚ï¼‰
â”‚   â”œâ”€â”€ æ´»è·ƒåº¦åˆ†æ
â”‚   â””â”€â”€ æ•°æ®å¯¼å‡º
â””â”€â”€ ç³»ç»Ÿè®¾ç½®
    â”œâ”€â”€ å­¦æ ¡ä¿¡æ¯é…ç½®
    â”œâ”€â”€ åŠŸèƒ½å¼€å…³
    â”œâ”€â”€ å­—å…¸ç®¡ç†ï¼ˆè¡Œä¸š/å…´è¶£ï¼‰
    â””â”€â”€ ç®¡ç†å‘˜ç®¡ç†
```

#### 9.5.2 ç®¡ç†å‘˜è§’è‰²

| è§’è‰² | æƒé™èŒƒå›´ |
|------|----------|
| è¶…çº§ç®¡ç†å‘˜ | å…¨éƒ¨æƒé™ï¼Œå¯ç®¡ç†å…¶ä»–ç®¡ç†å‘˜ |
| æ ¡å‹ä¼šç®¡ç†å‘˜ | æ ¡å‹å®¡æ ¸ã€æ´»åŠ¨ç®¡ç†ã€å†…å®¹ç®¡ç† |
| å†…å®¹ç¼–è¾‘ | æ–°é—»å…¬å‘Šå‘å¸ƒã€è½®æ’­å›¾ç®¡ç† |

### 9.6 äºŒæ¬¡å¼€å‘æŒ‡å—

#### 9.6.1 æ·»åŠ æ–°çš„ç­›é€‰ç»´åº¦

```javascript
// 1. åœ¨å­—å…¸è¡¨æ·»åŠ æ–°ç»´åº¦
await db.collection('alumni-dictionaries').add({
  _id: 'dict_skills',
  type: 'skill',
  items: [
    { value: 'python', label: 'Python', sort: 1 },
    { value: 'java', label: 'Java', sort: 2 },
    // ...
  ]
})

// 2. åœ¨ç”¨æˆ·è¡¨æ·»åŠ å­—æ®µ
// uni-id-users æ–°å¢: skills: string[]

// 3. åœ¨æœç´¢æ¥å£æ·»åŠ ç­›é€‰æ¡ä»¶
// alumni äº‘å¯¹è±¡ search æ–¹æ³•æ·»åŠ  skills å‚æ•°

// 4. å‰ç«¯ç­›é€‰ç»„ä»¶æ·»åŠ é€‰é¡¹
```

#### 9.6.2 è‡ªå®šä¹‰ä¸»é¢˜

```scss
// styles/themes/custom.scss
// å¤åˆ¶ default.scssï¼Œä¿®æ”¹é¢œè‰²å€¼å³å¯

:root {
  --primary-color: #ä½ çš„ä¸»è‰²;
  --primary-light: #ä¸»è‰²æµ…è‰²;
  --primary-dark: #ä¸»è‰²æ·±è‰²;
  // ...
}
```

#### 9.6.3 æ·»åŠ æ–°åŠŸèƒ½æ¨¡å—

```
1. åœ¨ pages/ ä¸‹åˆ›å»ºé¡µé¢ç›®å½•
2. åœ¨ pages.json æ³¨å†Œé¡µé¢è·¯ç”±
3. åœ¨ uniCloud/cloudfunctions/ åˆ›å»ºäº‘å¯¹è±¡
4. åœ¨ database/ åˆ›å»ºæ•°æ®è¡¨ schema
5. åœ¨ uni-admin æ·»åŠ ç®¡ç†é¡µé¢ï¼ˆå¦‚éœ€è¦ï¼‰
```

---

## åã€æ•°æ®å­—å…¸

### 10.1 æšä¸¾å€¼å®šä¹‰

#### æ ¡å‹è®¤è¯çŠ¶æ€ (alumniStatus)
| å€¼ | è¯´æ˜ |
|:--:|------|
| 0 | å¾…è®¤è¯ |
| 1 | å·²è®¤è¯ |
| 2 | å·²æ‹’ç» |

#### å­¦å†ç±»å‹ (degree)
| å€¼ | è¯´æ˜ |
|----|------|
| bachelor | æœ¬ç§‘ |
| master | ç¡•å£« |
| doctor | åšå£« |
| highschool | é«˜ä¸­ |
| middleschool | åˆä¸­ |

#### å­¦æ ¡ç±»å‹ (schoolType)
| å€¼ | è¯´æ˜ |
|----|------|
| university | å¤§å­¦/é«˜æ ¡ |
| highschool | é«˜ä¸­ |
| middleschool | åˆä¸­ |

#### ç»„ç»‡ç±»å‹ (organizationType)
| å€¼ | è¯´æ˜ |
|----|------|
| region | åŒºåŸŸæ ¡å‹ä¼š |
| industry | è¡Œä¸šæ ¡å‹ä¼š |
| interest | å…´è¶£æ ¡å‹ä¼š |
| grade | å±Šåˆ«ç»„ç»‡ |
| class | ç­çº§ç»„ç»‡ |

#### æ´»åŠ¨ç±»å‹ (activityType)
| å€¼ | è¯´æ˜ |
|----|------|
| reunion | æ ¡å‹èšä¼š |
| lecture | è®²åº§/åˆ†äº«ä¼š |
| exchange | è¡Œä¸šäº¤æµ |
| charity | å…¬ç›Šæ´»åŠ¨ |
| anniversary | æ ¡åº†æ´»åŠ¨ |

#### æ´»åŠ¨çŠ¶æ€ (activityStatus)
| å€¼ | è¯´æ˜ |
|:--:|------|
| 0 | è‰ç¨¿ |
| 1 | æŠ¥åä¸­ |
| 2 | è¿›è¡Œä¸­ |
| 3 | å·²ç»“æŸ |

#### åç‰‡è¯·æ±‚çŠ¶æ€ (cardRequestStatus)
| å€¼ | è¯´æ˜ |
|:--:|------|
| 0 | å¾…å¤„ç† |
| 1 | å·²åŒæ„ |
| 2 | å·²æ‹’ç» |
| 3 | å·²è¿‡æœŸ |

#### å¥½å‹çŠ¶æ€ (friendStatus)
| å€¼ | è¯´æ˜ |
|:--:|------|
| 1 | æ­£å¸¸ |
| 2 | å·²è§£é™¤ï¼ˆAåˆ é™¤Bï¼‰ |
| 3 | å·²è§£é™¤ï¼ˆBåˆ é™¤Aï¼‰ |
| 4 | åŒå‘è§£é™¤ |

#### éšç§å¯è§èŒƒå›´ (privacyScope)
| å€¼ | è¯´æ˜ |
|----|------|
| all | æ‰€æœ‰äººå¯è§ |
| classmate | ä»…åŒç­å¯è§ |
| friend | ä»…å¥½å‹å¯è§ |
| none | ä¸å…¬å¼€ |

### 10.2 è¡Œä¸šå­—å…¸ (é»˜è®¤)

| å€¼ | æ˜¾ç¤ºæ–‡æœ¬ |
|----|----------|
| it | IT/äº’è”ç½‘ |
| finance | é‡‘è/æŠ•èµ„ |
| education | æ•™è‚²/åŸ¹è®­ |
| medical | åŒ»ç–—/å¥åº· |
| government | æ”¿åºœ/äº‹ä¸šå•ä½ |
| manufacturing | åˆ¶é€ ä¸š |
| realestate | æˆ¿åœ°äº§/å»ºç­‘ |
| media | ä¼ åª’/å¹¿å‘Š |
| law | æ³•å¾‹/å’¨è¯¢ |
| other | å…¶ä»– |

> å¯åœ¨ç®¡ç†åå°è‡ªå®šä¹‰æ·»åŠ /ä¿®æ”¹

### 10.3 å…´è¶£æ ‡ç­¾ (é»˜è®¤)

| å€¼ | æ˜¾ç¤ºæ–‡æœ¬ |
|----|----------|
| basketball | ç¯®çƒ |
| football | è¶³çƒ |
| photography | æ‘„å½± |
| reading | é˜…è¯» |
| travel | æ—…è¡Œ |
| music | éŸ³ä¹ |
| movie | ç”µå½± |
| fitness | å¥èº« |
| gaming | æ¸¸æˆ |
| cooking | çƒ¹é¥ª |

> å¯åœ¨ç®¡ç†åå°è‡ªå®šä¹‰æ·»åŠ /ä¿®æ”¹

---

## åä¸€ã€å¸¸è§é—®é¢˜

### 11.1 éƒ¨ç½²ç›¸å…³

**Q: æœåŠ¡ç©ºé—´é€‰é˜¿é‡Œäº‘è¿˜æ˜¯è…¾è®¯äº‘ï¼Ÿ**
> æ¨èé˜¿é‡Œäº‘ï¼Œå…è´¹é¢åº¦æ›´å¤§ï¼Œä¸”å¯¹ uni-im æ”¯æŒæ›´å¥½ã€‚

**Q: éƒ¨ç½²åæ— æ³•ç™»å½•ï¼Ÿ**
> æ£€æŸ¥ï¼š1) å¾®ä¿¡å°ç¨‹åº AppID æ˜¯å¦æ­£ç¡®é…ç½®ï¼›2) æœåŠ¡ç©ºé—´æ˜¯å¦å…³è”æˆåŠŸï¼›3) äº‘å‡½æ•°æ˜¯å¦å…¨éƒ¨ä¸Šä¼ ã€‚

**Q: å¦‚ä½•è®¾ç½®ç¬¬ä¸€ä¸ªç®¡ç†å‘˜ï¼Ÿ**
> 1) å…ˆç”¨å¾®ä¿¡ç™»å½•å°ç¨‹åºï¼Œå®Œæˆæ³¨å†Œ
> 2) åœ¨ uniCloud æ§åˆ¶å°æ‰¾åˆ° uni-id-users è¡¨
> 3) æ‰¾åˆ°ä½ çš„ç”¨æˆ·è®°å½•ï¼Œæ·»åŠ è§’è‰²ï¼š`role: ['admin']`

### 11.2 åŠŸèƒ½ç›¸å…³

**Q: æ ¡å‹è®¤è¯å¯ä»¥è‡ªåŠ¨é€šè¿‡å—ï¼Ÿ**
> å¯ä»¥ï¼Œå¯ç”¨"æ¨èè®¤è¯"åŠŸèƒ½ï¼Œå½“ç´¯è®¡ N äººï¼ˆé»˜è®¤3äººï¼‰æ¨èåè‡ªåŠ¨é€šè¿‡ã€‚

**Q: å¦‚ä½•æ‰¹é‡å¯¼å…¥æ ¡å‹æ•°æ®ï¼Ÿ**
> ç®¡ç†åå°æä¾› Excel å¯¼å…¥åŠŸèƒ½ï¼Œæ¨¡æ¿æ ¼å¼è§ç®¡ç†åå°ä¸‹è½½ã€‚

**Q: èŠå¤©åŠŸèƒ½å¦‚ä½•å¼€é€šï¼Ÿ**
> éœ€è¦åœ¨ DCloud å¼€å‘è€…åå°å¼€é€š uni-im æœåŠ¡ï¼ˆæœ‰å…è´¹é¢åº¦ï¼‰ã€‚

### 11.3 å®šåˆ¶ç›¸å…³

**Q: å¦‚ä½•ä¿®æ”¹ä¸»é¢˜é¢œè‰²ï¼Ÿ**
> ç¼–è¾‘ `config/school.config.js` ä¸­çš„ `theme` é…ç½®ï¼Œæˆ–åœ¨ç®¡ç†åå°ä¿®æ”¹ã€‚

**Q: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰å­—æ®µï¼Ÿ**
> 1) ä¿®æ”¹æ•°æ®åº“ schemaï¼›2) ä¿®æ”¹å¯¹åº”äº‘å¯¹è±¡ï¼›3) ä¿®æ”¹å‰ç«¯è¡¨å•å’Œå±•ç¤ºã€‚

**Q: å¦‚ä½•å…³é—­æŸäº›åŠŸèƒ½æ¨¡å—ï¼Ÿ**
> åœ¨ `config/school.config.js` çš„ `features` ä¸­è®¾ç½®å¯¹åº”å¼€å…³ã€‚

---

## åäºŒã€é¡¹ç›®é‡Œç¨‹ç¢‘

| é˜¶æ®µ | ç›®æ ‡ | æ ¸å¿ƒåŠŸèƒ½ |
|------|------|----------|
| **MVP** | æ ¡å‹è®¤è¯ + æ‰¾æ ¡å‹ + å¥½å‹ | æ‰©å±•ç”¨æˆ·è¡¨ã€æ ¡å‹è®¤è¯ã€æ‰¾æ ¡å‹ï¼ˆå¤šæ¡ä»¶ç­›é€‰ï¼‰ã€åç‰‡äº¤æ¢ã€å¥½å‹ç³»ç»Ÿ |
| **V1.0** | å¥½å‹èŠå¤© + æ´»åŠ¨ | é›†æˆ uni-im å¥½å‹ç§èŠã€æ´»åŠ¨å‘å¸ƒ/æŠ¥å/ç­¾åˆ° |
| **V1.5** | ç®¡ç†åå° | é›†æˆ uni-adminã€æ ¡å‹å®¡æ ¸ã€æ•°æ®ç»Ÿè®¡ |
| **V2.0** | å¢å€¼åŠŸèƒ½ | æ ¡å‹åœ°å›¾ã€ç»„ç»‡ç¾¤èŠã€å­¦æ ¡é…ç½®ã€å¤šå¹³å°é€‚é…ä¼˜åŒ– |

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*
*æœ€åæ›´æ–°: 2026-01-13*
*åŸºäº: uni-starter v2.2.13*
